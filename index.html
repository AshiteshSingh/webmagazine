<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>Little Flower School | Digital Magazine</title>

<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

<link rel="preload" as="image" href="https://i.ibb.co/GfJypKpd/sld-2.jpg">
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>
/* CSS Variables */
:root {
  --text-white: #212529;
  --text-light: #495057;
  --text-gray: #6c757d;
  --accent-blue: #3e92cc;
  --accent-gold: #ffd700;
  --therese-rose: #f8b2c3;
  --therese-soft: #fce4ec;
  --therese-deep: #ad1457;
  --gandhi-orange: #ff8c00;
  --gandhi-saffron: #ff9933;
  --dussehra-red: #ff4500;
  --dussehra-orange: #ff6347;
  --heading-font: 'Playfair Display', serif;
  --body-font: 'Lato', sans-serif;
  --nav-bg: #1a202c;
}

/* Reset & Base */
* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }
body {
  font-family: var(--body-font);
  background-color: #f8f9fa;
  color: var(--text-white);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.6;
  overflow: hidden; /* Prevent scrolling on the body */
}

/* Horizontal Scrolling Layout */
.page-wrapper {
    height: 100vh;
    display: flex;
    overflow-x: scroll;
    scroll-snap-type: x mandatory;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none;  /* IE and Edge */
}
.page-wrapper::-webkit-scrollbar {
    display: none; /* Safari and Chrome */
}

.page-section {
    flex: 0 0 100vw;
    height: 100vh;
    scroll-snap-align: start;
    overflow-y: auto;
    position: relative;
}

/* Hero Section (First Page) */
.hero-section {
  background: url('https://i.ibb.co/GfJypKpd/sld-2.jpg') center center/cover no-repeat;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: #ffffff;
  padding: 1rem;
}
.hero-section::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0.5); /* Overlay for readability */
}
.hero-content {
  position: relative;
  z-index: 2;
  animation: fadeInScaleUp 1s ease-out;
}
@keyframes fadeInScaleUp {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}
.hero-title {
  font-family: var(--heading-font);
  font-size: clamp(3rem, 10vw, 6rem);
  text-shadow: 2px 4px 8px rgba(0,0,0,0.7);
  line-height: 1.1;
  margin-bottom: 1rem;
}
.hero-subtitle {
  font-size: clamp(1.2rem, 4vw, 1.8rem);
  font-weight: 300;
  text-shadow: 1px 2px 4px rgba(0,0,0,0.7);
  margin-bottom: 3rem;
}
.hero-nav {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 1rem;
}
.hero-nav a {
  color: #fff;
  text-decoration: none;
  font-size: 1.1rem;
  font-weight: 600;
  padding: 0.8rem 1.5rem;
  border: 2px solid rgba(255, 255, 255, 0.7);
  border-radius: 50px;
  transition: all 0.3s ease;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(5px);
}
.hero-nav a:hover {
  background: #fff;
  color: var(--text-white);
  border-color: #fff;
  transform: translateY(-3px);
}

/* Main Content Area (Second Page) */
.main-content {
  padding: 4rem 2.5rem;
  background: #f8f9fa;
}

.back-to-home {
    position: sticky;
    top: 20px;
    left: 20px;
    z-index: 100;
    margin-bottom: 2rem;
}
.back-to-home a {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 1.2rem;
    background-color: var(--nav-bg);
    color: #fff;
    text-decoration: none;
    border-radius: 50px;
    font-weight: 600;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
}
.back-to-home a:hover {
    background-color: var(--accent-blue);
    transform: translateY(-2px);
}

.container {
    max-width: 1140px;
    margin: 0 auto;
}
/* MODIFIED: Hide sections by default */
.content-section {
    margin-bottom: 4rem;
    display: none;
}
.content-section.active {
    display: block;
    animation: fadeIn 0.5s ease-in-out;
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}


.section-title {
  font-family: var(--heading-font);
  font-size: clamp(1.8rem, 6vw, 2.8rem);
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 3px solid var(--accent-blue);
  display: inline-block;
}

.section-credit {
  text-align: center;
  font-style: italic;
  color: var(--text-gray);
  margin-top: -1.5rem;
  margin-bottom: 2rem;
}

/* Cards */
.content-card {
  background: #ffffff;
  border-radius: 12px;
  padding: 1.25rem;
  border: 1px solid #dee2e6;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  width: 100%;
  transition: all 0.3s ease;
  margin-bottom: 1rem;
}
#articles .content-card, #poems .content-card:not(.video-card) { cursor: pointer; }


.content-card:hover { box-shadow: 0 8px 20px rgba(0,0,0,0.08), 0 0 15px rgba(62, 146, 204, 0.1); }

.card-icon { font-size: 1.6rem; color: var(--accent-blue); margin-bottom: 0.75rem; }

.content-card h3 {
  font-family: var(--heading-font);
  font-size: clamp(1.2rem, 5vw, 1.6rem);
  color: var(--text-white);
  margin-bottom: 0.75rem;
  line-height: 1.3;
}

.author-credit {
  font-size: 1rem;
  color: var(--accent-blue);
  font-style: italic;
  font-weight: 700;
  margin-bottom: 0.8rem;
  text-align: right;
  background: rgba(62, 146, 204, 0.1);
  padding: 0.4rem 0.8rem;
  border-radius: 6px;
  border-left: 3px solid var(--accent-blue);
}

.content-card p { color: var(--text-gray); line-height: 1.6; font-size: 0.9rem; }

/* E-Bulletin Section Styles */
.ebulletin-section {
  background: linear-gradient(135deg, rgba(62, 146, 204, 0.1), rgba(255, 215, 0, 0.1));
  border-radius: 20px;
  padding: 3rem 2rem;
  margin: 3rem 0;
  border: 1px solid rgba(62, 146, 204, 0.3);
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  overflow: hidden;
  position: relative;
}

.ebulletin-section::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
  animation: floating 6s ease-in-out infinite;
  will-change: transform;
}

@keyframes floating {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-10px) rotate(5deg); }
}

/* Comprehensive Themed Sections */
.gandhi-comprehensive, .therese-comprehensive, .dussehra-comprehensive {
  border-radius: 25px;
  padding: 4rem 3rem;
  margin: 3rem 0;
  box-shadow: 0 15px 40px rgba(0,0,0,0.1);
  position: relative;
  overflow: hidden;
}
.gandhi-comprehensive {
  background: linear-gradient(135deg, rgba(255, 140, 0, 0.05), rgba(138, 69, 19, 0.05), rgba(255, 215, 0, 0.08));
  border: 2px solid rgba(255, 140, 0, 0.4);
}
.therese-comprehensive {
  background: linear-gradient(135deg, rgba(248, 178, 195, 0.1), rgba(252, 228, 236, 0.08), rgba(173, 20, 87, 0.05));
  border: 2px solid rgba(248, 178, 195, 0.4);
}
.dussehra-comprehensive {
  background: linear-gradient(135deg, rgba(255, 69, 0, 0.05), rgba(255, 140, 0, 0.05), rgba(255, 215, 0, 0.08));
  border: 2px solid rgba(255, 69, 0, 0.4);
}

.gandhi-comprehensive::before, .therese-comprehensive::before, .dussehra-comprehensive::before {
  content: '';
  position: absolute;
  top: -60%;
  width: 200%;
  height: 200%;
  will-change: transform;
}

.gandhi-comprehensive::before {
  left: -50%;
  background: radial-gradient(circle, rgba(255, 140, 0, 0.1) 0%, transparent 50%);
  animation: gandhiFloat 8s ease-in-out infinite;
}
.therese-comprehensive::before {
  right: -50%;
  background: radial-gradient(circle, rgba(248, 178, 195, 0.15) 0%, transparent 50%);
  animation: thereseFloat 10s ease-in-out infinite;
}
@keyframes dussehraFloat {
  0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); }
  50% { transform: translateY(-18px) rotate(12deg) scale(1.03); }
}

.therese-header, .gandhi-header, .dussehra-header {
  text-align: center;
  margin-bottom: 3rem;
  position: relative;
  z-index: 3;
}

.therese-header h2, .gandhi-header h2, .dussehra-header h2 {
  font-family: var(--heading-font);
  font-size: clamp(2.5rem, 6vw, 4rem);
  text-shadow: 2px 2px 6px rgba(0,0,0,0.1);
  margin-bottom: 1rem;
}
.therese-header h2 { color: var(--therese-deep); }
.gandhi-header h2 { color: #ff8c00; }
.dussehra-header h2 { color: var(--dussehra-red); }

.therese-header p, .gandhi-header p, .dussehra-header p {
  font-size: clamp(1.1rem, 3vw, 1.4rem);
  color: var(--text-light);
  font-style: italic;
  text-shadow: none;
}

.gandhi-grid, .therese-grid, .dussehra-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 2.5rem;
  position: relative;
  z-index: 3;
}

.gandhi-fact-card, .therese-fact-card, .dussehra-fact-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
  will-change: transform, box-shadow;
}

.gandhi-fact-card { border: 1px solid rgba(255, 140, 0, 0.4); }
.therese-fact-card { border: 1px solid rgba(248, 178, 195, 0.4); }
.dussehra-fact-card { border: 1px solid rgba(255, 69, 0, 0.4); }

.gandhi-fact-card:hover { transform: translateY(-10px); box-shadow: 0 15px 35px rgba(0,0,0,0.12), 0 0 20px rgba(255, 140, 0, 0.4); border-color: var(--accent-gold); }
.therese-fact-card:hover { transform: translateY(-10px); box-shadow: 0 15px 35px rgba(0,0,0,0.12), 0 0 20px rgba(248, 178, 195, 0.4); border-color: var(--therese-rose); }
.dussehra-fact-card:hover { transform: translateY(-10px); box-shadow: 0 15px 35px rgba(0,0,0,0.12), 0 0 20px rgba(255, 69, 0, 0.4); border-color: var(--dussehra-red); }

.fact-content { position: relative; z-index: 2; display: flex; flex-direction: column; }
.fact-header { display: grid; grid-template-columns: 1fr 120px; gap: 1.5rem; align-items: center; margin-bottom: 1rem; }
.text-only-card .fact-header { grid-template-columns: 1fr; text-align: center; }

.fact-text h4 { font-family: var(--heading-font); font-size: clamp(1.3rem, 3vw, 1.6rem); margin-bottom: 1rem; text-shadow: none; }
.gandhi-fact-card:not(.lazy-bg) .fact-text h4 { color: #d97706; }
.therese-fact-card:not(.lazy-bg) .fact-text h4 { color: var(--therese-deep); }
.dussehra-fact-card:not(.lazy-bg) .fact-text h4 { color: var(--dussehra-red); }

.fact-image img {
  width: 100%;
  height: 120px;
  object-fit: cover;
  border-radius: 15px;
  transition: all 0.3s ease;
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.gandhi-fact-card .fact-image img { border: 3px solid rgba(255, 140, 0, 0.4); }
.therese-fact-card .fact-image img { border: 3px solid rgba(248, 178, 195, 0.4); }
.dussehra-fact-card .fact-image img { border: 3px solid rgba(255, 69, 0, 0.4); }
.gandhi-fact-card .fact-image:hover img { border-color: var(--accent-gold); transform: scale(1.05); }
.therese-fact-card .fact-image:hover img { border-color: var(--therese-rose); transform: scale(1.05); }
.dussehra-fact-card .fact-image:hover img { border-color: var(--dussehra-red); transform: scale(1.05); }

/* Audio Player for Fact Cards */
.fact-audio-player { background: #e9ecef; border-radius: 10px; padding: 0.875rem; margin: 1rem 0; box-shadow: 0 2px 6px rgba(0,0,0,0.1); border: 1px solid #ced4da; }
.therese-fact-card .fact-audio-player { border: 1px solid rgba(248, 178, 195, 0.4); }
.gandhi-fact-card .fact-audio-player { border: 1px solid rgba(255, 140, 0, 0.4); }
.dussehra-fact-card .fact-audio-player { border: 1px solid rgba(255, 69, 0, 0.4); }

.lazy-bg .fact-audio-player { background: rgba(45, 55, 72, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); }
.lazy-bg .fact-audio-title, .lazy-bg .fact-time-display { color: #fff; }

.fact-audio-controls { display: flex; align-items: center; gap: 0.75rem; }
.fact-play-btn { border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; min-width: 40px; min-height: 40px; }
.therese-fact-card .fact-play-btn { background: linear-gradient(135deg, var(--therese-rose), var(--therese-deep)); box-shadow: 0 4px 8px rgba(248, 178, 195, 0.4); }
.gandhi-fact-card .fact-play-btn { background: linear-gradient(135deg, var(--gandhi-orange), var(--gandhi-saffron)); box-shadow: 0 4px 8px rgba(255, 140, 0, 0.4); }
.dussehra-fact-card .fact-play-btn { background: linear-gradient(135deg, var(--dussehra-red), var(--dussehra-orange)); box-shadow: 0 4px 8px rgba(255, 69, 0, 0.4); }
.fact-play-btn:hover { transform: scale(1.05); background: linear-gradient(135deg, var(--accent-gold), #d69e2e); }
.fact-play-btn i { color: white; font-size: 0.9rem; margin-left: 2px; }
.fact-audio-info { flex: 1; min-width: 0; }
.fact-audio-title { color: var(--text-white); font-size: 0.8rem; font-weight: 600; margin-bottom: 0.5rem; }
.fact-progress-container { display: flex; align-items: center; gap: 0.5rem; }
.fact-time-display { color: var(--text-gray); font-size: 0.7rem; min-width: 30px; text-align: center; }
.fact-progress-bar { flex: 1; height: 6px; background: #d1d1d1; border-radius: 3px; cursor: pointer; }
.fact-text-content { margin-top: 1rem; }
.fact-text-content p { color: var(--text-light); line-height: 1.7; font-size: clamp(0.95rem, 2.5vw, 1.05rem); }

/* Audio Player */
.audio-player { background: #e9ecef; border-radius: 10px; padding: 0.875rem; margin: 1rem 0; border: 1px solid #ced4da; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
.audio-controls { display: flex; align-items: center; gap: 0.75rem; }
.play-btn { background: linear-gradient(135deg, var(--accent-blue), #2b6cb0); border: none; border-radius: 50%; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 8px rgba(62, 146, 204, 0.4); min-width: 48px; min-height: 48px; }
.play-btn:hover { transform: scale(1.05); background: linear-gradient(135deg, var(--accent-gold), #d69e2e); }
.play-btn i { color: white; font-size: 1.1rem; margin-left: 2px; }
.audio-info { flex: 1; min-width: 0; }
.audio-title { color: var(--text-white); font-size: 0.85rem; font-weight: 600; margin-bottom: 0.5rem; }
.progress-container { display: flex; align-items: center; gap: 0.5rem; }
.time-display { color: var(--text-gray); font-size: 0.75rem; min-width: 35px; text-align: center; }
.progress-bar { flex: 1; height: 8px; background: #ced4da; border-radius: 4px; cursor: pointer; }
audio { display: none; }

/* Video Card */
.video-card { position: relative; overflow: hidden; min-height: 400px; display: flex; border-radius: 12px; border: 2px solid var(--accent-blue); background-color: #333; }
.background-video { position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; object-fit: cover; transform: translate(-50%, -50%) scale(1.1); z-index: 0; }
.video-card::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.85)); z-index: 1; }
.video-card .card-content { position: relative; z-index: 2; height: 100%; display: flex; flex-direction: column; padding: 1.25rem; }

/* Text Synchronization */
.poem-text, .animated-text { font-family: 'Georgia', serif; font-size: clamp(0.85rem, 3.5vw, 1rem); line-height: 1.7; margin: 1rem 0; color: var(--text-light); min-height: 100px; }
.animated-text { display: none; }
.animated-text.active { display: block; }
.poem-text span, .animated-text span { display: inline-block; opacity: 0.5; transform: translateY(0); transition: all 0.3s ease; color: inherit; }
.poem-text span.visible, .animated-text span.visible { opacity: 1; color: var(--accent-blue); text-shadow: 1px 1px 3px rgba(62, 146, 204, 0.5); font-weight: 500; }
.video-card .poem-text { color: rgba(255, 255, 255, 0.98); font-weight: 500; text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.95); }
.video-card .poem-text span { color: rgba(255, 255, 255, 0.7); }
.video-card .poem-text span.visible { color: var(--accent-blue); text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.95), 1px 1px 3px rgba(62, 146, 204, 0.8); }

/* Grid Layouts */
.article-list, .content-grid { display: grid; gap: 1.25rem; grid-template-columns: 1fr; }
.paintings-grid {
    display: block;
    width: 100%;
    max-width: 1140px;
}
.paintings-long-grid {
    display: block;
    margin-top: 1rem;
    width: 100%;
}
.paintings-grid .grid-image-container,
.paintings-long-grid .grid-image-container {
    margin-bottom: 1rem; /* Add some spacing between images */
    width: 100%; /* Make each image container take up the full width */
}

/* New style for images within the paintings grid */
.paintings-grid img {
    width: 100%;
    height: auto;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
}
.paintings-long-grid img {
    width: 100%;
    height: auto;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
}
.paintings-grid img:hover, .paintings-long-grid img:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.grid-full-width { grid-column: 1 / -1; }
@media (min-width: 481px) and (max-width: 768px) { .content-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 769px) { .content-grid { grid-template-columns: repeat(3, 1fr); } }

/* OPTIMIZED: Lazy-loaded background card styles */
.lazy-bg {
  position: relative; 
  background-size: cover;
  background-position: center;
  border-color: rgba(255, 255, 255, 0.4);
  transition: background-image 0.5s ease-in-out;
}
.lazy-bg::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.6);
  border-radius: 20px; 
  z-index: 1;
}
.lazy-bg .fact-content { position: relative; z-index: 2; }
.lazy-bg h4, .lazy-bg p {
  color: #ffffff;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
}

/* =================================================== */
/* START: ANIMATED GALLERY STYLES (UPDATED) */
/* =================================================== */

.gallery-catalogue-wrapper {
  position: relative;
}

.gallery-catalogue-grid {
  display: flex;
  gap: 1.5rem;
  overflow-x: auto;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
  padding: 1rem 0.5rem;
}
.gallery-catalogue-grid::-webkit-scrollbar {
  display: none; /* Safari and Chrome */
}

.gallery-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  background: #fff;
  color: var(--text-white);
  border: none;
  border-radius: 50%;
  width: 44px;
  height: 44px;
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  transition: all 0.3s ease;
  opacity: 0; /* Hidden by default */
  pointer-events: none;
}
.gallery-arrow.visible {
  opacity: 1;
  pointer-events: auto;
}
.gallery-arrow:hover {
  background-color: var(--accent-blue);
  color: #fff;
  transform: translateY(-50%) scale(1.05);
}
.gallery-arrow.left { left: -15px; }
.gallery-arrow.right { right: -15px; }


.album-card {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  flex-direction: column;
  will-change: transform, box-shadow;
  /* Flexbox properties */
  flex: 0 0 300px;
  width: 300px;
}
.album-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 10px 25px rgba(62, 146, 204, 0.2);
}
.album-image-wrapper { position: relative; height: 200px; overflow: hidden; }
.album-image-wrapper img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
.album-card:hover .album-image-wrapper img { transform: scale(1.05); }

.album-info { padding: 1rem; }
.album-info h3 { font-family: var(--heading-font); font-size: 1.2rem; color: var(--text-white); margin: 0 0 0.5rem 0; }
.album-info .album-date { font-size: 0.85rem; color: var(--text-gray); margin: 0; }

.lightbox-overlay {
  display: none;
  position: fixed;
  z-index: 1000;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.85);
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(8px);
  overflow-y: auto;
}
.lightbox-content {
  background: #f8f9fa;
  padding: 2rem;
  border-radius: 15px;
  width: 90%;
  max-width: 1200px;
  position: relative;
  box-shadow: 0 10px 40px rgba(0,0,0,0.4);
  animation: fadeInScaleUp 0.4s ease-out;
}
.lightbox-close {
  position: absolute;
  top: -15px; right: -15px;
  color: #000;
  background: #fff;
  font-size: 2.5rem;
  font-weight: bold;
  cursor: pointer;
  width: 40px; height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  transition: transform 0.2s ease, background-color 0.2s ease;
}
.lightbox-close:hover { transform: rotate(90deg); background-color: #f1f1f1; }
#lightbox-title { font-family: var(--heading-font); font-size: 2rem; color: var(--text-white); margin-bottom: 1.5rem; text-align: center; }
.lightbox-images-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
  max-height: 75vh;
  overflow-y: auto;
  padding: 0 1rem;
}
.lightbox-images-grid .grid-image-container {
  overflow: hidden;
  border-radius: 8px;
  cursor: pointer;
}
.lightbox-images-grid img { 
  width: 100%; 
  height: 100%;
  object-fit: cover;
  border-radius: 8px; 
  transition: transform 0.2s ease, box-shadow 0.2s ease; 
}
.lightbox-images-grid .grid-image-container:hover img { 
  transform: scale(1.05); 
}

/* =================================================== */
/* START: ZOOM VIEWER STYLES */
/* =================================================== */
.zoom-overlay {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.9);
  z-index: 2000;
  display: none; /* Hidden by default */
  flex-direction: column;
  align-items: center;
  justify-content: center;
  animation: fadeInScaleUp 0.3s ease-out;
}
.zoom-container {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}
.zoom-container img {
  max-width: 90%;
  max-height: 90%;
  transition: transform 0.2s ease;
  cursor: grab;
  user-select: none; /* Prevent text selection */
  -webkit-user-drag: none; /* Prevent image ghost dragging */
}
.zoom-container img.is-zoomed { cursor: grab; }
.zoom-container img.is-panning { cursor: grabbing; }

.zoom-controls {
  position: absolute;
  top: 20px;
  right: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 2010;
}
.zoom-btn {
  background: rgba(255, 255, 255, 0.8);
  color: #333;
  border: none;
  width: 40px; height: 40px;
  border-radius: 50%;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  transition: all 0.2s ease;
}
.zoom-btn:hover { background: #fff; transform: scale(1.1); }
.zoom-btn.close-zoom { font-size: 1.8rem; line-height: 1; }

.zoom-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 44px; height: 44px;
  background: rgba(255, 255, 255, 0.8);
  color: #333;
  border: none;
  border-radius: 50%;
  font-size: 1.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  transition: all 0.2s ease;
  z-index: 2010;
}
.zoom-nav:hover { background: #fff; transform: translateY(-50%) scale(1.1); }
.zoom-nav.prev { left: 20px; }
.zoom-nav.next { right: 20px; }

/* =================================================== */
/* END: ZOOM VIEWER STYLES */
/* =================================================== */

/* =================================================== */
/* END: ANIMATED GALLERY STYLES */
/* =================================================== */

/* =================================================== */
/* START: ARTICLE SLIDE STYLES (NEW) */
/* =================================================== */
.article-slide-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(248, 249, 250, 0.98);
  backdrop-filter: blur(10px);
  z-index: 3000;
  display: none; /* Hidden by default */
  align-items: center;
  justify-content: center;
  padding: 2rem;
  opacity: 0;
  transition: opacity 0.4s ease-out;
  overflow-y: auto;
}
.article-slide-overlay.visible {
  display: flex;
  opacity: 1;
}
.article-slide-content {
  width: 100%;
  max-width: 900px;
  max-height: 95vh;
  overflow-y: auto;
  background: #fff;
  border-radius: 20px;
  padding: clamp(1.5rem, 5vw, 3rem);
  box-shadow: 0 10px 40px rgba(0,0,0,0.2);
  animation: fadeInScaleUp 0.5s ease-out;
  position: relative;
}
.article-slide-close {
  position: absolute;
  top: 15px;
  right: 15px;
  font-size: 2rem;
  color: var(--text-gray);
  cursor: pointer;
  background: none;
  border: none;
  line-height: 1;
  transition: all 0.2s ease;
}
.article-slide-close:hover {
  color: var(--text-white);
  transform: rotate(90deg);
}
#slide-title {
  font-family: var(--heading-font);
  font-size: clamp(2rem, 6vw, 3.5rem);
  color: var(--text-white);
  margin-bottom: 0.5rem;
}
#slide-author {
  font-size: 1.1rem;
  color: var(--accent-blue);
  font-style: italic;
  font-weight: 700;
  margin-bottom: 2rem;
}
#slide-audio-player-container { margin-bottom: 1.5rem; }
#slide-text-content {
  /* This is now styled by the 'poem-text' class via JS */
  font-size: clamp(1rem, 2.5vw, 1.2rem);
  line-height: 1.8;
}

/* =================================================== */
/* END: ARTICLE SLIDE STYLES */
/* =================================================== */

/* NEW: FLOATING NAVIGATION BAR STYLES */
.floating-nav {
  position: fixed;
  bottom: -100px; /* Start off-screen */
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 600px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 50px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  display: flex;
  justify-content: space-around;
  padding: 0.75rem 1.5rem;
  z-index: 999;
  transition: bottom 0.5s ease-out;
}

.floating-nav.visible {
  bottom: 20px;
}

.floating-nav a {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-decoration: none;
  color: var(--text-gray);
  font-size: 0.75rem;
  font-weight: 600;
  transition: color 0.3s ease, transform 0.2s ease;
}

.floating-nav a i {
  font-size: 1.2rem;
  margin-bottom: 0.25rem;
  transition: color 0.3s ease;
}

.floating-nav a.active {
  color: var(--accent-blue);
  transform: scale(1.1);
}

.floating-nav a:hover {
  color: var(--accent-blue);
}

/* =================================================== */
/* START: MOBILE-SPECIFIC OPTIMIZATIONS */
/* =================================================== */
@media (max-width: 992px) {
  .hero-nav {
      gap: 0.5rem;
  }
  .hero-nav a {
      font-size: 1rem;
      padding: 0.7rem 1.2rem;
  }
  .main-content {
    padding: 2.5rem 1.5rem;
  }
}


@media (max-width: 768px) {
  /* Responsive adjustments for fact sections */
  .fact-header { grid-template-columns: 1fr; gap: 1rem; text-align: center; }
  .fact-image img { height: 200px; width: 100%; }
  .gandhi-comprehensive, .therese-comprehensive, .dussehra-comprehensive { padding: 2rem 1.5rem; }
  .gandhi-grid, .therese-grid, .dussehra-grid { grid-template-columns: 1fr; gap: 2rem; }
  
  /* Disable expensive continuous animations on mobile */
  .ebulletin-section::before,
  .gandhi-comprehensive::before,
  .therese-comprehensive::before,
  .dussehra-comprehensive::before {
    animation: none;
  }

  /* Disable GPU-intensive blur effects on mobile for smoother scrolling */
  .lightbox-overlay {
    backdrop-filter: none;
  }

  /* Adjust gallery arrows for smaller screens */
  .gallery-arrow {
    width: 38px;
    height: 38px;
    font-size: 1rem;
  }
  .gallery-arrow.left { left: 5px; }
  .gallery-arrow.right { right: 5px; }

  .zoom-nav.prev { left: 10px; }
  .zoom-nav.next { right: 10px; }
}
/* =================================================== */
/* END: MOBILE-SPECIFIC OPTIMIZATIONS */
/* =================================================== */

#paintings {
    position: relative;
    background-image: none;
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: white;
    min-height: 100vh; /* This ensures the background covers the full screen height */
    will-change: transform;
}
#paintings::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 1;
}

.paintings-content {
    position: relative;
    z-index: 2;
    padding: 4rem 2.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
}

#paintings .section-title {
    color: #fff;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
    border-bottom: 3px solid #fff;
}
#paintings .paintings-grid img,
#paintings .paintings-long-grid img {
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

@media (max-width: 768px) {
    #paintings {
        background-attachment: scroll; /* Disable fixed background on mobile for performance */
    }
}
.paintings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    width: 100%; /* Ensure the grid takes full width */
    max-width: 1140px; /* Match container width for consistency */
}
.paintings-long-grid {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
    width: 100%;
}
.paintings-long-grid .grid-image-container {
    max-width: 300px;
}


.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  padding: 1rem 0;
}
.gallery-grid img {
  width: 100%;
  height: 250px;
  object-fit: cover;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
}
.gallery-grid img:hover {
  transform: scale(1.05);
}

</style>

    <style>
    /* Smooth scrolling optimization */
    html {
        scroll-behavior: smooth;
    }

    /* Image lazy loading fade-in */
    img[loading="lazy"] {
        transition: opacity 0.3s ease;
    }

    img[loading="lazy"].loaded {
        opacity: 1 !important;
    }

    /* Performance optimizations */
    * {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* Scroll performance */
    body {
        -webkit-overflow-scrolling: touch;
    }

    /* Reduce motion for users who prefer it */
    @media (prefers-reduced-motion: reduce) {
        html {
            scroll-behavior: auto;
        }

        * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* Loading indicator for slow images */
    .image-loading {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
    }

    @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }

    /* Smooth audio controls */
    audio {
        transition: all 0.3s ease;
    }

    audio:hover {
        transform: scale(1.02);
    }
    </style>
    </head>

<body>
<div class="page-wrapper">
    <section id="home" class="page-section hero-section">
        <div class="hero-content">
            <h1 class="hero-title">Little Flower School</h1>
            <p class="hero-subtitle">Digital Magazine 2025-26</p>
            <nav class="hero-nav">
            <a href="#articles">Articles</a>
            <a href="#ebulletin">E-Bulletin</a>
            <a href="#videos">Videos</a>
            <a href="#poems">Poems</a>
            <a href="#paintings">Paintings</a>
            <a href="#gallery">Gallery</a>
            </nav>
        </div>
    </section>

    <section id="content-page" class="page-section">
        <main class="main-content">
            <div class="back-to-home">
                <a href="#home"><i class="fas fa-arrow-left"></i> Back to Home</a>
            </div>
            <div class="container">
                <section id="articles" class="content-section">
                    <h2 class="section-title">Articles</h2>
                    <div class="article-list">
                        <!-- Article cards go here -->
                        <div class="content-card featured-article">
                            <h3>लालबहादुर शास्त्री : सादगी और सत्यनिष्ठा के प्रतीक</h3>
                            <div class="author-credit">-देवांश मणि त्रिपाठी कक्षा X - E</div>
                            <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-9"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">लालबहादुर शास्त्री : सादगी और सत्यनिष्ठा के प्रतीक</div><div class="progress-container"><span class="time-display" id="current-time-9">0:00</span><div class="progress-bar" id="progress-bar-9"></div><span class="time-display" id="duration-9">0:00</span></div></div></div></div><audio id="hindi-shastri-audio" src="https://media.redcircle.com/2025/9/23/11/ec2ec1a7-d7e9-4713-bb0f-1ebb5e960f86_b934218f-cfbb-479a-a519-8d415e5db58e.mp3"></audio>
                            <div id="hindi-shastri-text" class="animated-text"></div>
                            </div>
                            <div class="content-card featured-article">
                            <h3>The Boy Who Loved a Peach Tree</h3>
                            <div class="author-credit">-Suryansh Pandey Class VI B</div>
                            <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-10"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">The Boy Who Loved a Peach Tree</div><div class="progress-container"><span class="time-display" id="current-time-10">0:00</span><div class="progress-bar" id="progress-bar-10"></div><span class="time-display" id="duration-10">0:00</span></div></div></div></div><audio id="peach-tree-audio" src="https://media.redcircle.com/2025/9/23/10/99c4633b-426e-48e8-915e-ad8c55a55f51_peachtree.mp3"></audio>
                            <div id="peach-tree-text" class="animated-text"></div>
                            </div>
                            <div class="content-card featured-article">
                            <h3>Remembering Lal Bahadur Shastri</h3>
                            <p style="font-style: italic; margin-top: -0.5rem; color: var(--text-gray);">From Commoner to Commander: India's Humble Hero</p>
                            <div class="author-credit">- Pavani Maurya X E</div>
                            <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-8"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">Remembering Lal Bahadur Shastri</div><div class="progress-container"><span class="time-display" id="current-time-8">0:00</span><div class="progress-bar" id="progress-bar-8"></div><span class="time-display" id="duration-8">0:00</span></div></div></div></div><audio id="shastri-audio" src="https://media.redcircle.com/2025/9/23/10/db24d810-e1e1-4595-9e37-cc1dc0ab0403_luvvoice.com-20250923-2jxt0o.mp3"></audio>
                            <div id="shastri-article-text" class="animated-text"></div>
                            </div>
                            <div class="content-card featured-article">
                            <h3>A Prayer from the Heart of a Kid</h3>
                            <div class="author-credit">- Aarav Jaiswal LKG F</div>
                            <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-5"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">A Prayer from the Heart of a Kid</div><div class="progress-container"><span class="time-display" id="current-time-5">0:00</span><div class="progress-bar" id="progress-bar-5"></div><span class="time-display" id="duration-5">0:45</span></div></div></div></div><audio id="prayer-audio" src="https://media.redcircle.com/2025/9/22/6/bf45189d-14a3-4dfd-9a46-0ee9ef8d394a_prayer.mp3"></audio>
                            <div id="prayer-text" class="animated-text"></div>
                            </div>
                            <div class="content-card featured-article">
                            <h3>The Enduring Wisdom of Gandhiji in the Modern World</h3>
                            <div class="author-credit">- Harshit Kumar IX-A</div>
                            <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-3"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">The Enduring Wisdom of Gandhiji in the Modern World</div><div class="progress-container"><span class="time-display" id="current-time-3">0:00</span><div class="progress-bar" id="progress-bar-3"></div><span class="time-display" id="duration-3">1:45</span></div></div></div></div><audio id="gandhi-audio" src="https://media.redcircle.com/2025/9/22/6/0822814c-ba33-4806-bee4-5facd4151612_enduring_gandhi.mp3"></audio>
                            <div id="gandhi-article" class="animated-text"></div>
                            </div>
                            <div class="content-card featured-article">
                            <h3>The Gentle Power of Truth and Simplicity</h3>
                            <div class="author-credit">- Anshika Patel XII-C</div>
                            <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-1"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">The Gentle Power of Truth and Simplicity</div><div class="progress-container"><span class="time-display" id="current-time-1">0:00</span><div class="progress-bar" id="progress-bar-1"></div><span class="time-display" id="duration-1">1:31</span></div></div></div></div><audio id="audio" src="https://media.redcircle.com/2025/9/22/6/6a1c0f30-c116-4983-9465-0cc0b723a263_the_gentle_power_of_truth_and_simplicity.mp3"></audio>
                            <div id="animated-article" class="animated-text"></div>
                            </div>
                    </div>
                </section>

                <section id="ebulletin" class="content-section">
                    <h2 class="section-title">E-Bulletin</h2>
                     <p class="section-credit">-Arpit Kumar Gupta XII-B</p>
          
                    <div class="therese-comprehensive">
                        <div class="therese-header">
                        <h2>Saint Thérèse: The Little Flower</h2>
                        <p>"I will spend my heaven doing good on earth"</p>
                        </div>
                        <div class="therese-grid">
                        <div class="therese-fact-card text-only-card lazy-bg" data-bg="url('https://i.ibb.co/6cwn4hQQ/St-Theresyounger.jpg')"><div class="fact-content"><div class="fact-header"><div class="fact-text"><h4>Youngest Doctor of the Church</h4></div></div><div class="fact-audio-player"><div class="fact-audio-controls"><button class="fact-play-btn" id="youngest-play-btn"><i class="fas fa-play"></i></button><div class="fact-audio-info"><div class="fact-audio-title">Youngest Doctor of the Church</div><div class="progress-container"><span class="fact-time-display" id="youngest-current-time">0:00</span><div class="fact-progress-bar" id="youngest-progress-bar"></div><span class="fact-time-display" id="youngest-duration">1:30</span></div></div></div></div><audio id="youngest-audio" src="https://media.redcircle.com/2025/9/22/6/b7b9666e-1b40-4c3a-93dc-a5d0391556f7_youngest.mp3"></audio><div class="fact-text-content"><p>Saint Thérèse is considered the youngest Doctor of the Church, having died at age 24 and been named a Doctor of the Church posthumously by Pope John Paul II in 1997. Only the third woman to receive this honor.</p></div></div></div>
                        <div class="therese-fact-card text-only-card lazy-bg" data-bg="url('https://i.ibb.co/0Vf0SyzV/thelittleway.jpg')"><div class="fact-content"><div class="fact-header"><div class="fact-text"><h4>The Little Way</h4></div></div><div class="fact-audio-player"><div class="fact-audio-controls"><button class="fact-play-btn" id="way-play-btn"><i class="fas fa-play"></i></button><div class="fact-audio-info"><div class="fact-audio-title">The Little Way</div><div class="fact-progress-container"><span class="fact-time-display" id="way-current-time">0:00</span><div class="fact-progress-bar" id="way-progress-bar"></div><span class="fact-time-display" id="way-duration">1:45</span></div></div></div></div><audio id="way-audio" src="https://media.redcircle.com/2025/9/22/6/eead6d25-6fca-4c38-acde-06c0e6a22f90_little.mp3"></audio><div class="fact-text-content"><p>St. Thérèse developed "The Little Way" - a spiritual path emphasizing performing everyday, ordinary actions with great love, trusting in God's infinite mercy, and accepting one's "littleness" as means of spiritual growth.</p></div></div></div>
                        <div class="therese-fact-card text-only-card lazy-bg" data-bg="url('https://i.ibb.co/zVLPtR3W/early.jpg')"><div class="fact-content"><div class="fact-header"><div class="fact-text"><h4>Early Life & Family</h4></div></div><div class="fact-audio-player"><div class="fact-audio-controls"><button class="fact-play-btn" id="life-play-btn"><i class="fas fa-play"></i></button><div class="fact-audio-info"><div class="fact-audio-title">Early Life & Family</div><div class="fact-progress-container"><span class="fact-time-display" id="life-current-time">0:00</span><div class="fact-progress-bar" id="life-progress-bar"></div><span class="fact-time-display" id="life-duration">1:20</span></div></div></div></div><audio id="life-audio" src="https://media.redcircle.com/2025/9/22/6/96b7487e-5a6b-495e-8860-6944b7405a1b_earlylife.mp3"></audio><div class="fact-text-content"><p>Born Marie Françoise-Thérèse Martin on January 2, 1873, in Alençon, France. She was the youngest of nine children, four of whom became Carmelite nuns. Her parents, Louis and Zélie Martin, were both declared saints in 2015.</p></div></div></div>
                        <div class="therese-fact-card text-only-card lazy-bg" data-bg="url('https://i.ibb.co/Y7yKQXDb/nunat15.jpg')"><div class="fact-content"><div class="fact-header"><div class="fact-text"><h4>Carmelite Nun at 15</h4></div></div><div class="fact-audio-player"><div class="fact-audio-controls"><button class="fact-play-btn" id="nun-play-btn"><i class="fas fa-play"></i></button><div class="fact-audio-info"><div class="fact-audio-title">Carmelite Nun at 15</div><div class="fact-progress-container"><span class="fact-time-display" id="nun-current-time">0:00</span><div class="fact-progress-bar" id="nun-progress-bar"></div><span class="fact-time-display" id="nun-duration">1:10</span></div></div></div></div><audio id="nun-audio" src="https://media.redcircle.com/2025/9/22/7/948f4e2a-7865-485b-aa36-f4393b254677_nunat15.mp3"></audio><div class="fact-text-content"><p>Despite her young age, Thérèse entered the Carmelite convent at Lisieux at age 15 in 1888. She joined her older sisters Pauline and Marie, and later her sister Céline also joined the same convent.</p></div></div></div>
                        <div class="therese-fact-card text-only-card lazy-bg" data-bg="url('https://i.ibb.co/xK8nQnjB/autobiogarphy.jpg')"><div class="fact-content"><div class="fact-header"><div class="fact-text"><h4>The Story of a Soul</h4></div></div><div class="fact-audio-player"><div class="fact-audio-controls"><button class="fact-play-btn" id="soul-play-btn"><i class="fas fa-play"></i></button><div class="fact-audio-info"><div class="fact-audio-title">The Story of a Soul</div><div class="fact-progress-container"><span class="fact-time-display" id="soul-current-time">0:00</span><div class="fact-progress-bar" id="soul-progress-bar"></div><span class="fact-time-display" id="soul-duration">1:35</span></div></div></div></div><audio id="soul-audio" src="https://media.redcircle.com/2025/9/22/7/9acbab64-d1d1-4d49-9b5a-051055b9d58f_death12.mp3"></audio><div class="fact-text-content"><p>Her autobiography "The Story of a Soul" was published after her death and became one of the most widely read spiritual autobiographies. It spread her "Little Way" teachings across the world and contributed to her rapid canonization.</p></div></div></div>
                        <div class="therese-fact-card text-only-card lazy-bg" data-bg="url('https://i.ibb.co/RpHrFNXW/death23.jpg')"><div class="fact-content"><div class="fact-header"><div class="fact-text"><h4>Death & Canonization</h4></div></div><div class="fact-audio-player"><div class="fact-audio-controls"><button class="fact-play-btn" id="death-play-btn"><i class="fas fa-play"></i></button><div class="fact-audio-info"><div class="fact-audio-title">Death & Canonization</div><div class="fact-progress-container"><span class="fact-time-display" id="death-current-time">0:00</span><div class="fact-progress-bar" id="death-progress-bar"></div><span class="fact-time-display" id="death-duration">1:25</span></div></div></div></div><audio id="death-audio" src="https://media.redcircle.com/2025/9/22/7/6a92be31-7d28-4236-add5-cb93a735e0fe_colony.mp3"></audio><div class="fact-text-content"><p>Died of tuberculosis on September 30, 1897, at age 24. Canonized by Pope Pius XI in 1925, just 28 years after her death. Her last words were "My God, I love you." She promised to "spend my heaven doing good on earth."</p></div></div></div>
                        </div>
                    </div>
                </section>

                <section id="videos" class="content-section">
                    <h2 class="section-title">Videos</h2>
                    <div class="content-grid">
                        <div class="content-card">
                            <div class="card-icon"><i class="fas fa-video"></i></div>
                            <h3>Event Highlights</h3>
                            <p>A dance performance reflecting dedication, teamwork, and artistry...</p>
                            <div class="video-container" style="position: relative; padding-top: 56.25%; margin-top: 1rem;">
                                <iframe width="914" height="514" src="https://www.youtube.com/embed/s-SB42Vs7I0" title="A dance performance reflecting dedication, teamwork, and artistry..." frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 8px;"></iframe>
                            </div>
                        </div>
                        <div class="content-card"><div class="card-icon"><i class="fas fa-film"></i></div><h3>Student Stories</h3><p>Personal narratives and experiences shared by our amazing students.</p></div>
                        <div class="content-card"><div class="card-icon"><i class="fas fa-play-circle"></i></div><h3>Educational Content</h3><p>Learning videos and tutorials created by students for students.</p></div>
                    </div>
                </section>

                <section id="poems" class="content-section">
                    <h2 class="section-title">Poems</h2>
                     <div class="content-grid">
                        <div class="content-card featured-article grid-full-width">
                        <h3>विश्वास तुम जन मन के</h3>
                        <div class="author-credit">- डॉ. शर्वांजली श्रीवास्तव (अध्यापिका हिंदी)</div>
                        <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-7"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">विश्वास तुम जन मन के</div><div class="progress-container"><span class="time-display" id="current-time-7">0:00</span><div class="progress-bar" id="progress-bar-7"></div><span class="time-display" id="duration-7">4:30</span></div></div></div></div><audio id="hindi-poem-audio" src="https://media.redcircle.com/2025/9/22/7/fd0195b8-4289-433a-ab72-49eb38679fea_china.mp3"></audio>
                        <div id="hindi-poem-text" class="animated-text"></div>
                        </div>
                        <div class="content-card featured-article grid-full-width">
                        <h3>कर्मयुद्ध</h3>
                        <div class="author-credit">- श्वेताम्भ पाण्डेय कक्षा XII बी<br>द्वारा स्वरचित काव्य पाठ<br>विजेता - तृतीय पुरस्कार (वरिष्ठ वर्ग)<br>काव्य पाठ प्रतियोगिता<br>आयोजन स्थल: महाराणा प्रताप इंटर कॉलेज<br>अवसर: हिंदी दिवस, 13-09-2025</div>
                        <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-6"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">कर्मयुद्ध</div><div class="progress-container"><span class="time-display" id="current-time-6">0:00</span><div class="progress-bar" id="progress-bar-6"></div><span class="time-display" id="duration-6">3:00</span></div></div></div></div><audio id="karmayuddh-audio" src="https://media.redcircle.com/2025/9/22/7/68f7efe0-519e-47fc-bc9d-99106f323263_karmayudh.mp3"></audio>
                        <div id="karmayuddh-text" class="animated-text"></div>
                        </div>
                        <div class="content-card featured-article grid-full-width">
                        <h3>साहित्य में गांधी</h3>
                        <div class="author-credit">- Amal Verma IX-A<br>Student Editor</div>
                        <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-4"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">साहित्य में गांधी</div><div class="progress-container"><span class="time-display" id="current-time-4">0:00</span><div class="progress-bar" id="progress-bar-4"></div><span class="time-display" id="duration-4">2:30</span></div></div></div></div><audio id="hindi-article-audio" src="https://media.redcircle.com/2025/9/22/7/908e7291-5edf-4733-8e6e-a92a633183ed_gandh123i.mp3"></audio>
                        <div id="hindi-article-text" class="animated-text"></div>
                        </div>
                        <div class="content-card featured-article video-card grid-full-width">
                        <video class="background-video" autoplay muted loop playsinline><source src="gandhi-video.mp4" type="video/mp4"><source src="gandhi-video.webm" type="video/webm"></video>
                        <div class="card-content">
                            <h3>In Their Quiet Way</h3><p style="font-style: italic; margin-bottom: 1rem;">A tribute to Gandhi and Saint Thérèse of Lisieux</p>
                            <div id="poem-text" class="poem-text"></div>
                            <div class="audio-player"><div class="audio-controls"><button class="play-btn" id="play-btn-2"><i class="fas fa-play"></i></button><div class="audio-info"><div class="audio-title">In Their Quiet Way</div><div class="progress-container"><span class="time-display" id="current-time-2">0:00</span><div class="progress-bar" id="progress-bar-2"></div><span class="time-display" id="duration-2">0:47</span></div></div></div></div><audio id="poem-audio" src="https://media.redcircle.com/2025/9/22/7/9c5ff290-ee9d-4af6-a7bf-6b6ba44b6875_ashay.mp3"></audio>
                        </div>
                        </div>
                    </div>
                </section>

                <section id="paintings" class="content-section">
    <h2 class='section-title'>Paintings</h2>
    <p class='section-description'>Student artwork and creative expressions</p>
</section>
                
                <section id="gallery" class="content-section">
                    <h2 class="section-title">Gallery</h2>
                    <div class="gallery-catalogue-wrapper">
                        <button id="scroll-left-btn" class="gallery-arrow left" aria-label="Scroll left"><i class="fas fa-chevron-left"></i></button>
                        <div class="gallery-catalogue-grid">
                        <div class="album-card" data-album="welcome-program"><div class="album-image-wrapper"><img src="https://i.ibb.co/wZWQCtDF/FERWELL-FR-GREOGERY-2.jpg" alt="Welcome Program" loading="lazy"></div><div class="album-info"><h3>Welcome Program</h3><p class="album-date">23-04-2025</p></div></div>
                        <div class="album-card" data-album="pope-condolences"><div class="album-image-wrapper"><img src="https://i.ibb.co/39jbgTvq/POPE-1-Copy.jpg" alt="Pope Francis - Condolences" loading="lazy"></div><div class="album-info"><h3>Pope Francis - Condolences</h3><p class="album-date">26-04-2025</p></div></div>
                        <div class="album-card" data-album="results-declaration"><div class="album-image-wrapper"><img src="https://i.ibb.co/0yt9ZR9M/Whats-App-Image-2025-09-23-at-12-19-44-9251a4fa.jpg" alt="ICSE, ISC Result Declaration" loading="lazy"></div><div class="album-info"><h3>ICSE, ISC Results</h3><p class="album-date">30-04-2025</p></div></div>
                        <div class="album-card" data-album="yoga-day"><div class="album-image-wrapper"><img src="https://i.ibb.co/8DNMZw58/YOGA-DAY-1.jpg" alt="Yoga Day" loading="lazy"></div><div class="album-info"><h3>Yoga Day</h3><p class="album-date">21-06-2025</p></div></div>
                        <div class="album-card" data-album="staff-orientation-khorabar"><div class="album-image-wrapper"><img src="https://via.placeholder.com/400x250.png?text=LFS+Staff" alt="Staff Orientation in Khorabar" loading="lazy"></div><div class="album-info"><h3>Staff Orientation - Khorabar</h3><p class="album-date">27-06-2025</p></div></div>
                        <div class="album-card" data-album="staff-picnic"><div class="album-image-wrapper"><img src="https://via.placeholder.com/400x250.png?text=Staff+Picnic" alt="Staff Picnic -Bhutwal" loading="lazy"></div><div class="album-info"><h3>Staff Picnic - Bhutwal</h3><p class="album-date">28-06-2025</p></div></div>
                        <div class="album-card" data-album="career-guidance"><div class="album-image-wrapper"><img src="https://i.ibb.co/B10KmGr/SEMINAR-9-min.jpg" alt="Career Plan and Guidance" loading="lazy"></div><div class="album-info"><h3>Career Guidance Program</h3><p class="album-date">05-07-2025</p></div></div>
                        <div class="album-card" data-album="investiture-ceremony"><div class="album-image-wrapper"><img src="https://i.ibb.co/ycZ10Gdp/INVESTITURE-CEROMONY-9.jpg" alt="Investiture Ceremony" loading="lazy"></div><div class="album-info"><h3>Investiture Ceremony</h3><p class="album-date">12-07-2025</p></div></div>
                        <div class="album-card" data-album="independence-day"><div class="album-image-wrapper"><img src="https://i.ibb.co/nNj4Lk2L/INDEPENDECE-DAY-1.jpg" alt="Independence Day" loading="lazy"></div><div class="album-info"><h3>Independence Day</h3><p class="album-date">15-08-2025</p></div></div>
                        <div class="album-card" data-album="teachers-day"><div class="album-image-wrapper"><img src="https://i.ibb.co/0ws33Pw/TEACHERS-DAY-1.jpg" alt="Teachers' Day and Onam" loading="lazy"></div><div class="album-info"><h3>Teachers' Day & Onam</h3><p class="album-date">06-09-2025</p></div></div>
                        <div class="album-card" data-album="poetry-competition"><div class="album-image-wrapper"><img src="https://via.placeholder.com/400x250.png?text=Poetry+Competition" alt="Hindi Poetry Recitation" loading="lazy"></div><div class="album-info"><h3>Hindi Poetry Competition</h3><p class="album-date">13-09-2025</p></div></div>
                        <div class="album-card" data-album="blood-donation"><div class="album-image-wrapper"><img src="https://via.placeholder.com/400x250.png?text=Blood+Donation" alt="Blood Donation" loading="lazy"></div><div class="album-info"><h3>Blood Donation Camp</h3><p class="album-date">30-09-2025</p></div></div>
                        
                        <!-- NEW GALLERY SECTIONS -->
                        <div class="album-card" data-album="inter-house-competitions"><div class="album-image-wrapper"><img src="https://placehold.co/400x250/d9534f/ffffff?text=Inter+House" alt="Inter House Competitions" loading="lazy"></div><div class="album-info"><h3>Inter House Competitions</h3><p class="album-date">29-08-2025</p></div></div>
                        <div class="album-card" data-album="asisc-competitions"><div class="album-image-wrapper"><img src="https://placehold.co/400x250/5cb85c/ffffff?text=ASISC+Competitions" alt="ASISC UP and UK Competitions" loading="lazy"></div><div class="album-info"><h3>ASISC UP and UK Competitions</h3><p class="album-date">01-09-2025</p></div></div>
                        <div class="album-card" data-album="board-meeting"><div class="album-image-wrapper"><img src="https://placehold.co/400x250/f0ad4e/ffffff?text=Board+Meeting" alt="Board Meeting" loading="lazy"></div><div class="album-info"><h3>Board Meeting</h3><p class="album-date">10-09-2025</p></div></div>
                        <div class="album-card" data-album="bsa-meeting"><div class="album-image-wrapper"><img src="https://placehold.co/400x250/5bc0de/ffffff?text=BSA+Meeting" alt="BSA Meeting" loading="lazy"></div><div class="album-info"><h3>BSA Meeting</h3><p class="album-date">15-09-2025</p></div></div>
                        <div class="album-card" data-album="summer-camp"><div class="album-image-wrapper"><img src="https://placehold.co/400x250/292b2c/ffffff?text=Summer+Camp" alt="Summer Camp" loading="lazy"></div><div class="album-info"><h3>Summer Camp</h3><p class="album-date">20-07-2025</p></div></div>

                        </div>
                        <button id="scroll-right-btn" class="gallery-arrow right" aria-label="Scroll right"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </section>
            </div>
        </main>
    </section>
</div>


<!-- NEW: FLOATING NAVIGATION BAR -->
<nav id="floating-nav" class="floating-nav">
  <a href="#articles"><i class="fas fa-book"></i><span>Articles</span></a>
  <a href="#ebulletin"><i class="fas fa-newspaper"></i><span>E-Bulletin</span></a>
  <a href="#videos"><i class="fas fa-video"></i><span>Videos</span></a>
  <a href="#poems"><i class="fas fa-pencil-alt"></i><span>Poems</span></a>
  <a href="#paintings"><i class="fas fa-paint-brush"></i><span>Paintings</span></a>
  <a href="#gallery"><i class="fas fa-images"></i><span>Gallery</span></a>
</nav>

<div id="gallery-lightbox" class="lightbox-overlay">
  <span class="lightbox-close">&times;</span>
  <div class="lightbox-content">
    <h3 id="lightbox-title">Album Title</h3>
    <div id="lightbox-images" class="lightbox-images-grid"></div>
  </div>
</div>

<!-- NEW: ZOOM VIEWER HTML -->
<div id="image-zoom-overlay" class="zoom-overlay">
    <div class="zoom-controls">
        <button id="zoom-in-btn" class="zoom-btn" aria-label="Zoom In"><i class="fas fa-plus"></i></button>
        <button id="zoom-out-btn" class="zoom-btn" aria-label="Zoom Out"><i class="fas fa-minus"></i></button>
        <button id="zoom-close-btn" class="zoom-btn close-zoom" aria-label="Close">&times;</button>
    </div>
    <button id="zoom-prev-btn" class="zoom-nav prev" aria-label="Previous image"><i class="fas fa-chevron-left"></i></button>
    <div class="zoom-container">
        <img id="zoomed-image" src="" alt="Zoomed view" loading="lazy" style="opacity:0;transition:opacity 0.3s ease;">
    </div>
    <button id="zoom-next-btn" class="zoom-nav next" aria-label="Next image"><i class="fas fa-chevron-right"></i></button>
</div>

<!-- NEW: ARTICLE SLIDE OVERLAY -->
<div id="article-slide" class="article-slide-overlay">
    <div class="article-slide-content">
        <button class="article-slide-close">&times;</button>
        <h2 id="slide-title"></h2>
        <div id="slide-author"></div>
        <div id="slide-audio-player-container"></div>
        <div id="slide-text-content"></div>
    </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
  'use strict';

    // --- Horizontal Page Scrolling & Section Switching Logic ---
    const pageWrapper = document.querySelector('.page-wrapper');
    const heroNavLinks = document.querySelectorAll('.hero-nav a');
    const contentPage = document.getElementById('content-page');
    const homeLink = document.querySelector('.back-to-home a');
    const contentSections = document.querySelectorAll('.content-section');
    const floatingNav = document.getElementById('floating-nav');
    const floatingNavLinks = floatingNav.querySelectorAll('a');

    const updateFloatingNav = () => {
        const contentPageRect = contentPage.getBoundingClientRect();
        if (contentPageRect.left <= 0 && contentPageRect.right > 0) {
            floatingNav.classList.add('visible');
        } else {
            floatingNav.classList.remove('visible');
        }

        // Highlight active link based on scroll position
        const currentScrollY = contentPage.scrollTop + 100;
        contentSections.forEach(section => {
            const sectionRect = section.getBoundingClientRect();
            const floatingNavLink = floatingNav.querySelector(`a[href="#${section.id}"]`);
            if (floatingNavLink) {
                if (sectionRect.top <= 100 && sectionRect.bottom > 100) {
                    floatingNavLink.classList.add('active');
                } else {
                    floatingNavLink.classList.remove('active');
                }
            }
        });
    };

    pageWrapper.addEventListener('scroll', updateFloatingNav);
    contentPage.addEventListener('scroll', updateFloatingNav);

    // Show articles section by default when content page is loaded/scrolled to
    const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
            if (!document.querySelector('.content-section.active')) {
                document.getElementById('articles').classList.add('active');
            }
        }
    }, { threshold: 0.1 });
    observer.observe(contentPage);


    function switchContentSection(targetId) {
        // Scroll the main page wrapper horizontally to the content page
        pageWrapper.scrollTo({
            left: contentPage.offsetLeft,
            behavior: 'smooth'
        });
        
        // Use a short delay to allow scroll to start before switching content
        setTimeout(() => {
            let targetFound = false;
            contentSections.forEach(section => {
                if ('#' + section.id === targetId) {
                    section.classList.add('active');
                    targetFound = true;
                } else {
                    section.classList.remove('active');
                }
            });
            // Fallback for safety
            if (!targetFound) {
                 document.getElementById('articles').classList.add('active');
            }
            // Scroll content page to the target section
            const targetSection = document.getElementById(targetId.substring(1));
            if (targetSection) {
                 contentPage.scrollTo({
                     top: targetSection.offsetTop,
                     behavior: 'smooth'
                 });
            } else {
                 contentPage.scrollTop = 0;
            }
        }, 100);
    }

    heroNavLinks.forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            const targetId = link.getAttribute('href');
            switchContentSection(targetId);
        });
    });

    floatingNavLinks.forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            const targetId = link.getAttribute('href');
            switchContentSection(targetId);
        });
    });

    if (homeLink) {
        homeLink.addEventListener('click', e => {
            e.preventDefault();
            pageWrapper.scrollTo({
                left: 0,
                behavior: 'smooth'
            });
        });
    }


  // Audio Player Setup Function
  function setupAudioPlayer(audioId, playBtnId, progressBarId, currentTimeId, durationId) {
    const audio = document.getElementById(audioId);
    const playBtn = document.getElementById(playBtnId);
    const progressBar = document.getElementById(progressBarId);
    const currentTimeDisplay = document.getElementById(currentTimeId);
    const durationDisplay = document.getElementById(durationId);
    if (!audio || !playBtn || !progressBar) return null;
    let isPlaying = false;
    const formatTime = (seconds) => {
      if (!seconds || isNaN(seconds)) return '0:00';
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = Math.floor(seconds % 60);
      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
    };
    const togglePlay = (e) => { 
        if(e) e.stopPropagation(); 
        isPlaying ? audio.pause() : audio.play().catch(err => console.error("Audio play failed:", err)); 
    };
    playBtn.addEventListener('click', togglePlay);
    audio.addEventListener('play', () => { isPlaying = true; playBtn.innerHTML = '<i class="fas fa-pause"></i>'; });
    audio.addEventListener('pause', () => { isPlaying = false; playBtn.innerHTML = '<i class="fas fa-play"></i>'; });
    audio.addEventListener('timeupdate', () => {
      if (audio.duration) {
        const progress = (audio.currentTime / audio.duration) * 100;
        if (currentTimeDisplay) currentTimeDisplay.textContent = formatTime(audio.currentTime);
        progressBar.style.background = `linear-gradient(to right, var(--accent-blue) ${progress}%, #ced4da ${progress}%)`;
      }
    });
    audio.addEventListener('loadedmetadata', () => { if (durationDisplay) durationDisplay.textContent = formatTime(audio.duration); });
    progressBar.addEventListener('click', (e) => {
      e.stopPropagation();
      const rect = progressBar.getBoundingClientRect();
      audio.currentTime = ((e.clientX - rect.left) / rect.width) * audio.duration;
    });
    return { audio, togglePlay, isPlaying: () => isPlaying };
  }

  // Fact Audio Player Setup Function
  function setupFactAudioPlayer(audioId, playBtnId, progressBarId, currentTimeId, durationId, progressColor = 'var(--therese-rose)') {
    const audio = document.getElementById(audioId);
    const playBtn = document.getElementById(playBtnId);
    const progressBar = document.getElementById(progressBarId);
    const currentTimeDisplay = document.getElementById(currentTimeId);
    const durationDisplay = document.getElementById(durationId);
    if (!audio || !playBtn || !progressBar) return null;
    let isPlaying = false;
    const formatTime = (seconds) => {
      if (!seconds || isNaN(seconds)) return '0:00';
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = Math.floor(seconds % 60);
      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
    };
    const togglePlay = (e) => { 
        if(e) e.stopPropagation(); 
        isPlaying ? audio.pause() : audio.play().catch(err => console.error("Audio play failed:", err)); 
    };
    playBtn.addEventListener('click', togglePlay);
    audio.addEventListener('play', () => { isPlaying = true; playBtn.innerHTML = '<i class="fas fa-pause"></i>'; });
    audio.addEventListener('pause', () => { isPlaying = false; playBtn.innerHTML = '<i class="fas fa-play"></i>'; });
    audio.addEventListener('timeupdate', () => {
      if (audio.duration) {
        const progress = (audio.currentTime / audio.duration) * 100;
        if (currentTimeDisplay) currentTimeDisplay.textContent = formatTime(audio.currentTime);
        progressBar.style.background = `linear-gradient(to right, ${progressColor} ${progress}%, #d1d1d1 ${progress}%)`;
      }
    });
    audio.addEventListener('loadedmetadata', () => { if (durationDisplay) durationDisplay.textContent = formatTime(audio.duration); });
    progressBar.addEventListener('click', (e) => {
      e.stopPropagation();
      const rect = progressBar.getBoundingClientRect();
      audio.currentTime = ((e.clientX - rect.left) / rect.width) * audio.duration;
    });
    return { audio, togglePlay, isPlaying: () => isPlaying };
  }

  // **OPTIMIZED** Text Synchronization Function
  const setupAudioText = (container, audio, textContent) => {
    if (!container || !audio) return;
    
    const rawText = textContent || container.textContent;
    if (!rawText) return;
    const words = rawText.trim().split(/\s+/);
    container.innerHTML = words.map(word => `<span class="word-span">${word}</span>`).join(' ');
    const spans = container.children;
    
    const updateText = () => {
      if (!audio.duration || isNaN(audio.duration) || spans.length === 0) return;
      const timePerWord = audio.duration / spans.length;
      const currentWordIndex = Math.floor(audio.currentTime / timePerWord);
      
      for (let i = 0; i < spans.length; i++) {
        spans[i].classList.toggle('visible', i <= currentWordIndex);
      }
    };

    audio.addEventListener('play', () => {
      if (container.classList.contains('animated-text')) container.classList.add('active');
    });

    audio.addEventListener('timeupdate', updateText);
    audio.addEventListener('seeked', updateText);
    
    audio.addEventListener('ended', () => {
      for (let i = 0; i < spans.length; i++) { spans[i].classList.add('visible'); }
      setTimeout(() => {
        if(container) { // Check if container still exists
            Array.from(spans).forEach(span => span.classList.remove('visible'));
            if (container.classList.contains('animated-text')) container.classList.remove('active');
        }
      }, 1500);
    });

    // Initial state
    updateText();
  };
  
    // Store all audio elements and their original states
    const allAudioElements = Array.from(document.querySelectorAll('audio'));

  // Setup all audio players
  const allAudioPlayers = [
    setupAudioPlayer('prayer-audio', 'play-btn-5', 'progress-bar-5', 'current-time-5', 'duration-5'),
    setupAudioPlayer('gandhi-audio', 'play-btn-3', 'progress-bar-3', 'current-time-3', 'duration-3'),
    setupAudioPlayer('audio', 'play-btn-1', 'progress-bar-1', 'current-time-1', 'duration-1'),
    setupAudioPlayer('poem-audio', 'play-btn-2', 'progress-bar-2', 'current-time-2', 'duration-2'),
    setupAudioPlayer('hindi-article-audio', 'play-btn-4', 'progress-bar-4', 'current-time-4', 'duration-4'),
    setupAudioPlayer('karmayuddh-audio', 'play-btn-6', 'progress-bar-6', 'current-time-6', 'duration-6'),
    setupAudioPlayer('hindi-poem-audio', 'play-btn-7', 'progress-bar-7', 'current-time-7', 'duration-7'),
    setupAudioPlayer('shastri-audio', 'play-btn-8', 'progress-bar-8', 'current-time-8', 'duration-8'),
    setupAudioPlayer('hindi-shastri-audio', 'play-btn-9', 'progress-bar-9', 'current-time-9', 'duration-9'),
    setupAudioPlayer('peach-tree-audio', 'play-btn-10', 'progress-bar-10', 'current-time-10', 'duration-10'),
    setupFactAudioPlayer('youngest-audio', 'youngest-play-btn', 'youngest-progress-bar', 'youngest-current-time', 'youngest-duration'),
    setupFactAudioPlayer('way-audio', 'way-play-btn', 'way-progress-bar', 'way-current-time', 'way-duration'),
    setupFactAudioPlayer('life-audio', 'life-play-btn', 'life-progress-bar', 'life-current-time', 'life-duration'),
    setupFactAudioPlayer('nun-audio', 'nun-play-btn', 'nun-progress-bar', 'nun-current-time', 'nun-duration'),
    setupFactAudioPlayer('soul-audio', 'soul-play-btn', 'soul-progress-bar', 'soul-current-time', 'soul-duration'),
    setupFactAudioPlayer('death-audio', 'death-play-btn', 'death-progress-bar', 'death-current-time', 'death-duration'),
    setupFactAudioPlayer('international-audio', 'international-play-btn', 'international-progress-bar', 'international-current-time', 'international-duration', 'var(--gandhi-orange)'),
    setupFactAudioPlayer('nobel-audio', 'nobel-play-btn', 'nobel-progress-bar', 'nobel-current-time', 'nobel-duration', 'var(--gandhi-orange)'),
    setupFactAudioPlayer('education-audio', 'education-play-btn', 'education-progress-bar', 'education-current-time', 'education-duration', 'var(--gandhi-orange)'),
    setupFactAudioPlayer('salt-audio', 'salt-play-btn', 'salt-progress-bar', 'salt-current-time', 'salt-duration', 'var(--gandhi-orange)'),
    setupFactAudioPlayer('philo-audio', 'philo-play-btn', 'philo-progress-bar', 'philo-current-time', 'philo-duration', 'var(--gandhi-orange)'),
    setupFactAudioPlayer('legacy-audio', 'legacy-play-btn', 'legacy-progress-bar', 'legacy-current-time', 'legacy-duration', 'var(--gandhi-orange)'),
    setupFactAudioPlayer('god1-audio', 'god1-play-btn', 'god1-progress-bar', 'god1-current-time', 'god1-duration', 'var(--dussehra-red)'),
    setupFactAudioPlayer('god2-audio', 'god2-play-btn', 'god2-progress-bar', 'god2-current-time', 'god2-duration', 'var(--dussehra-red)')
  ].filter(p => p);

  // Defer heavy text-sync setup to prevent blocking initial render
  const textContents = {
      'hindi-shastri-text': `लालबहादुर शास्त्री जी का नाम भारतीय राजनीति में सादगी, ईमानदारी और राष्ट्रभक्ति के प्रतीक के रूप में अमर है। उनका जन्म 2 अक्टूबर, 1904 को उत्तर प्रदेश के मुगलसराय में हुआ था। बचपन में ही पिता का निधन हो गया, जिससे परिवार पर आर्थिक कठिनाइयाँ आ गईं। फिर भी उन्होंने साहस और परिश्रम से अपनी शिक्षा जारी रखी। काशी विद्यापीठ से पढ़ाई पूरी करने के बाद उन्हें ‘शास्त्री’ की उपाधि प्राप्त हुई। शास्त्री जी का जीवन स्वतंत्रता आंदोलन से गहराई से जुड़ा रहा। महात्मा गांधी के विचारों से प्रेरित होकर उन्होंने असहयोग आंदोलन, नमक आंदोलन (सत्याग्रह) और भारत छोड़ो आंदोलन में भाग लिया। अंग्रेजों के विरुद्ध संघर्ष करते हुए वे कई बार जेल गए। उनका जीवन इस बात का प्रमाण है कि कठिनाइयों और बाधाओं के बावजूद यदि मन में देशभक्ति और सत्य का सहारा हो तो कोई भी लक्ष्य कठिन नहीं रहता। स्वतंत्रता के बाद शास्त्री जी को विभिन्न जिम्मेदारियाँ निभाने का अवसर मिला। उन्होंने रेल मंत्री, परिवहन एवं संचार मंत्री, वाणिज्य मंत्री और गृह मंत्री के रूप में उल्लेखनीय कार्य किए। उनकी सादगी और ईमानदारी ने उन्हें जनता का प्रिय बना दिया। 1964 में पंडित नेहरू के निधन के बाद उन्हें भारत का प्रधानमंत्री चुना गया। इस पद पर आसीन होकर उन्होंने देशभक्ति को सर्वोपरि माना और हमेशा आम जन के हित के लिए निर्णय लिए। यद्यपि उनका प्रधानमंत्री पद का कार्यकाल अल्पकालिक रहा, किन्तु वह अत्यंत प्रभावशाली था। 1965 में भारत-पाक युद्ध के समय उन्होंने पूरे देश को एकजुट किया और सैनिकों का उत्साह बढ़ाया। उन्होंने “जय जवान,जय किसान” का नारा दिया जिसने सैनिकों और किसानों दोनों को देश निर्माण में योगदान करने के लिए प्रेरित किया। उनके नेतृत्व ने यह सिद्ध कर दिया कि सच्चा प्रधानमंत्री वही है जो संकट की घड़ी में जनता का मार्गदर्शन कर सके। शास्त्री जी अपने जीवन में अत्यंत सरल और मितव्ययी रहे। प्रधानमंत्री बनने के बाद भी वे सामान्य नागरिक की तरह जीवन व्यतीत करते थे। वे दिखावे और विलासिता से दूर रहते थे तथा देशहित को सर्वोपरि मानते थे।10 जनवरी, 1966 को ताशकंद में भारत-पाक शांति समझौता हुआ, किंतु दुर्भाग्यवश 11 जनवरी की सुबह वहीं पर उनका निधन हो गया। उनकी मृत्यु आज भी रहस्यमयी मानी जाती है। यद्यपि उनका जीवनकाल छोटा रहा, लेकिन अपने आदर्शो, नीतियों और विचारों से उन्होंने देशवासियों को सदा के लिए प्रेरणा दी। लाल बहादुर शास्त्री जी ने यह सिद्ध कर दिया कि महानता पद या शक्ति से नहीं, बल्कि सादगी, ईमानदारी और राष्ट्र सेवा से मिलती है। वे एक सच्चे देशभक्त,आदर्श नेता और जनता के प्रधानमंत्री थे।`,
      'peach-tree-text': `In a small village, a kind boy named Danish lovingly cared for a little peach sapling until it grew into a magnificent tree. The tree was a marvel! Its branches were heavy with peaches as sweet as sugar. The fruit had a delightful, rich flavour that made anyone who tasted it fall in love. Danish was incredibly proud of his tree. Soon, a group of students came running to the tree. Without asking Danish's permission, they climbed the branches like unruly monkeys. They plucked and ate more peaches than they could possibly finish, leaving half-eaten fruit scattered on the ground. After they had had their fill, the students vanished as quickly as they had appeared. Later that evening, Danish was heartbroken when he saw the mess. His beautiful tree was stripped bare, and the ground was littered with wasted peaches. From that day on, Danish felt a new protectiveness over his tree, hoping no one would ever treat it so carelessly again. Moral: Treat nature with respect and care, and remember to ask before you take what doesn't belong to you.`,
      'shastri-article-text': `From Commoner to Commander: India's Humble Hero Born on the same day as Mahatma Gandhi, Lal Bahadur Shastri was an immensely impactful independence activist and politician of our country. Yet, unlike other leaders, he is often overlooked in the pages of history. He was born in Mughalsarai, Uttar Pradesh, on 2nd October 1904. At merely 18 months old, he lost his father to the bubonic plague. Growing up, poverty was his constant companion. These hardships shaped his personality, making him resilient and simple. Influenced by the patriotic figures surrounding him, Shastri ji started actively participating in national activism in the early 1920s. He was imprisoned twice in this pursuit. He also dropped his surname 'Srivastava' and took the title 'Shastri' awarded by his degree institution instead of opining caste distinctions. After the independence, he served as the Minister of Railways from 1952 to 1956. He later resigned from this post, deeming himself responsible for the 1956 Ariyalur train accident. Such acts of honesty are, to this date, rarely seen in politicians. Later, he served as the Prime Minister of India from 1964 to 1966. In this brief duration, he managed to achieve feats that others could only dream of. He fuelled the Green Revolution and the White Revolution, bringing sustainable changes to the country. When India faced a severe food shortage, he asked citizens to skip one meal a week to save food and even practiced it himself. During the Indo-Pakistani War of 1965, he inspired the nation with his famous slogan, "Jai Jawan, Jai Kisan," which still echoes in every patriot's heart. After the war, Shastri ji and President Ayub Khan of Pakistan met in Tashkent, USSR, under Soviet mediation. On 10 January 1966, they signed the Tashkent Declaration, formally ending the conflict. Lal Bahadur Shastri's story teaches us that true leadership isn't about power or fame, but about selflessness, humility, and unwavering integrity. His life, though tragically cut short, serves as a powerful lesson for every student. He showed us that a simple person, driven by a deep love for their country, can achieve extraordinary things. His slogan, "Jai Jawan, Jai Kisan," continues to remind us to honor both the soldier who defends our borders and the farmer who feeds our nation. Let's remember Shastri Ji not just as a former Prime Minister, but as a humble hero who showed us the path to a better India through his actions. You led with a humble yet fearless heart, And lived with the attitude of a commoner. You left behind values of humility so high And a legacy too great for us to honour.`,
      'prayer-text': `Dear St. Little Flower, Please pick me a rose from the "Heavenly Garden" and send it to me with a message of your love. Please ask God to bless me and everyone. Tell Him that I will love Him more and more each day. Amen.`,
      'gandhi-article': `On Gandhi Jayanti, we reflect on a man whose ideas are more relevant today than ever. In a world full of conflict and consumerism, Gandhiji's principles of non-violence, simplicity, and self-reliance offer a powerful roadmap for a better future. His message of non-violence shows us that dialogue and tolerance are the true path to resolving conflict. His call for simple living reminds us to choose sustainability over endless consumption. His vision of Sarvodaya- the welfare of all—urges us to fight for justice and equality for everyone. Gandhiji's timeless values are a guiding light, inspiring us to build a more peaceful and just world. As he once said, "The best way to find yourself is to lose yourself in the service of others."`,
      'animated-article': `In an age filled with noise and constant distractions, the lives of certain individuals remind us of values that never fade. Among them are Mahatma Gandhi and St. Therese of Little Flower. Though they lived in different worlds and walked different paths, both carried within them treasures that can guide our generation—truth, compassion, and simplicity. For Mahatma Gandhi, truth was life's highest principle. He lived with the belief that honesty and nonviolence were stronger than any weapon. His compassion embraced every human being, and his simple lifestyle proved that greatness doesn't come from wealth but from integrity and courage. St. Therese of Lisieux taught the "Little way"; finding holiness in ordinary acts done with love can have extraordinary meaning. For her, simplicity was a path to God and humanity—smiling through suffering, offering small sacrifices, and finding beauty in everyday life. Together they remind us that personal transformation begins with small choices: to speak truthfully, to act kindly, and to live simply. When these values meet, they soften hearts and heal communities. If we carry these lessons in our daily lives, we too can help change the world.`,
      'hindi-article-text': `भारतीय स्वतंत्रता संग्राम के पहले चरण में हिंदी साहित्य मुख्यतः वीर रस और जागरण का माध्यम था। कविताएँ और लेख अधिकतर शौर्यगान व तत्कालीन क्रांतिकारी भावनाओं से भरे हुए थे। गांधीजी ने सत्य, अहिंसा और स्वदेशी को केवल राजनीतिक अस्त्र ही नहीं, बल्कि जीवन का दर्शन बनाया। इन आदर्शों ने साहित्यकारों और कवियों की लेखनी को गहराई से प्रभावित किया। राष्ट्रकवि मैथिलीशरण गुप्त की कविता "नर हो, न निराश करो मन को" गांधीवादी संयम का रूप है। गुप्त ने लिखा— "नर हो, न निराश करो मन को, कुछ काम करो, कुछ काम करो।" यह पंकीयाएं गांधीजी के कर्मयोग और आत्मबल की शिक्षा से मेल खाती हैं। रामधारी सिंह 'दिनकर' ने गांधीजी को इन शब्दों में याद किया - "गांधी तूफ़ान के पिता और बाजों के भी बाज थे, क्योंकि वे नीरवता की आवाज थे।" दिनकर की इन पंक्तियों में गांधीजी का वह स्वरूप उभरता है, जिसमें वे एक ओर संघर्ष और तूफ़ान खड़ा करने वाले थे, तो दूसरी ओर अहिंसा और शांति की सबसे प्रबल आवाज भी। सुभद्राकुमारी चौहान की कविताओं में भी गांधीवादी आदर्शों की छाया दिखती है। वे गांधीजी के असहयोग आंदोलन में भाग लेने वाली वह प्रथम महिला बनीं और इसी चक्कर में वे दो बार जेल भी गई थीं। गांधीजी ने स्वयं कहा था कि "साहित्य को समाज का दर्पण होना चाहिए।" यही कारण है कि उनके समय का हिंदी साहित्य केवल देशभक्ति नहीं, बल्कि सत्य, अहिंसा और स्वदेशी जीवन-शैली का जीवंत दस्तावेज बन गया।`,
      'karmayuddh-text': `कब तक कर्म को अपने तुम टालते रहोगे, कब तक जीवन के सुखी पल तुम काटते रहोगे? कब तक हार का तुम अभ्यास करते रहोगे? कब तक संसार के तानों को तुम सुनते रहोगे? कब तक अपने अवगुणों को बातों से भरते रहोगे? अरे! चल पड़ो उस राह पर जो ले चले आकाश पर, चुप बैठो तुम मत अब यहाँ इस दुनिया की आवाज़ पर। कर चलो नर्दन अपने कर्मों की आवाज़ से, मत दबो समाज के इस कटाक्षों के दबावों से। कर चलो कुछ ऐसा लोग जल उठें जलन से, लड़ चलो इस दुनिया के स्वार्थी चलन से। दिखा दो उनको तुम कोई गुजरा हुआ वक्त नहीं, जान जाएँ सब कि तुम-sa न कोई शख्स कहीं। हार मानना न तुम इस पथ पर चलते समय कभी, केशव को याद रखना तुम हारोगे न फिर कभी। घोर विपदाओं का समय अब छा गया है, घोर विपदाओं का समय अब छा गया है। लड़ने को तैयार हो, युद्ध का वक्त आ गया है। युद्ध का वक्त आ गया है।`,
      'poem-text': `They did not lead with power, they led with presence. They did not sit on thrones, they knelt in silence. A rosary… a spinning wheel… threads and thorns, patience and prayer. She loved in silence, he fasted in truth. She bore the hidden flame, he bore the steadfast light. Without lifting a weapon, without raising a voice, they changed the world. Without pride, without noise, they changed the world. Their lives were answers, not arguments. Their days were prayers, not proclamations. Their steps were songs, not speeches. And in the hush they left behind, we still find— the fragrance of faith, the whisper of hope, the eternal shape of love.`,
      'hindi-poem-text': `विश्वास तुम जन मन के तुमने संघर्ष चुना, तुमने चुना नेह, जन - जन का। तुम बने आत्मबल तुमने लौटाई आत्मा, भारत की.... तुमने माना अहिंसा परमो धर्म:। जब लगी थी दृष्टि सम्पूर्ण विश्व की, तुम लगे जागरण से, तुम लगे विश्वास से, तुम जाग पड़े आत्माओं में, तुम बन गए, न्याय सबके मन के। वो दुर्बल सी काया, पर विश्वास बड़ा था, वो आधी धोती, पर उसका विस्तार बड़ा था, तुम्हारी लाठी की आवाज़ में आदर्श का पहरा खड़ा था, तुमने जो कहा, किया.... आत्मा कीतल गहराइयों तक। स्वातंत्र्य की सुगंध घनीभूत थी, राहों में दांडी, और मन में करके मरने की चाह, कर्म बड़े और छोटी सी काया, उन झुर्रियों में अनुभव और दृढ़ संकल्प समाया था। तुम मन हो तुम जन हो तुम आत्मा हो तुम भरत सरीखे भारत के अग्रदूत है नमन तुम्हें, हे बापू! तुम जन मन के विश्वास बने तुम जन- जन के।`
  };

  // Add text synchronization for articles and poems
  const textSyncElements = [
    { audioId: 'hindi-shastri-audio', textId: 'hindi-shastri-text' },
    { audioId: 'peach-tree-audio', textId: 'peach-tree-text' },
    { audioId: 'shastri-audio', textId: 'shastri-article-text' },
    { audioId: 'prayer-audio', textId: 'prayer-text' },
    { audioId: 'gandhi-audio', textId: 'gandhi-article' },
    { audioId: 'audio', textId: 'animated-article' },
    { audioId: 'hindi-poem-audio', textId: 'hindi-poem-text' },
    { audioId: 'karmayuddh-audio', textId: 'karmayuddh-text' },
    { audioId: 'hindi-article-audio', textId: 'hindi-article-text' },
    { audioId: 'poem-audio', textId: 'poem-text' }
  ];

  // Setup text synchronization for each audio-text pair
  textSyncElements.forEach(({ audioId, textId }) => {
    const audioElement = document.getElementById(audioId);
    const textContainer = document.getElementById(textId);
    const textContent = textContents[textId];

    if (audioElement && textContainer && textContent) {
      setupAudioText(textContainer, audioElement, textContent);
    }
  });
  


  // --- Lazy Load CSS Backgrounds ---
  const lazyBackgrounds = document.querySelectorAll('.lazy-bg');
  if ("IntersectionObserver" in window) {
    const lazyBgObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const element = entry.target;
          element.style.backgroundImage = element.dataset.bg;
          observer.unobserve(element);
        }
      });
    }, { rootMargin: "0px 0px 200px 0px" });
    lazyBackgrounds.forEach(bg => lazyBgObserver.observe(bg));
  }

  // --- Gallery Data & Logic ---
  const galleryData = {
    'welcome-program': { title: "Welcome Program", images: ['https://i.ibb.co/wZWQCtDF/FERWELL-FR-GREOGERY-2.jpg', 'https://i.ibb.co/4n17dhRP/FERWELL-FR-GREOGERY-1.jpg'] },
    'pope-condolences': { title: "Pope Francis - Condolences", images: ['https://i.ibb.co/39jbgTvq/POPE-1-Copy.jpg', 'https://i.ibb.co/HLD0TYN4/POPE-2.jpg'] },
    'results-declaration': { title: "ICSE, ISC Result Declaration", images: ['https://i.ibb.co/0yt9ZR9M/Whats-App-Image-2025-09-23-at-12-19-44-9251a4fa.jpg', 'https://i.ibb.co/zhTPyQW0/icseresults.jpg'] },
    'yoga-day': { title: "Yoga Day", images: ['https://i.ibb.co/8DNMZw58/YOGA-DAY-1.jpg','https://i.ibb.co/qFXCFFwy/YOGA-DAY-2.jpg','https://i.ibb.co/PZSLQnBc/YOGA-DAY-3.jpg'] },
    'staff-orientation-khorabar': { title: "Staff Orientation - Khorabar", images: ['https://via.placeholder.com/800x600.png?text=Staff+Orientation'] },
    'staff-picnic': { title: "Staff Picnic - Bhutwal", images: ['https://via.placeholder.com/800x600.png?text=Staff+Picnic+Fun'] },
    'career-guidance': { title: "Career Guidance Program", images: ['https://i.ibb.co/B10KmGr/SEMINAR-9-min.jpg', 'https://i.ibb.co/GQRpBB46/SEMINAR-10-min.jpg', 'https://i.ibb.co/mVWrLgXT/SEMINAR-3-min.jpg', 'https://i.ibb.co/NdyNNQgL/SEMINAR-4-min.jpg', 'https://i.ibb.co/XZbNFZLQ/SEMINAR-5-min.jpg', 'https://i.ibb.co/7JnbWbhY/SEMINAR-6-min.jpg', 'https://i.ibb.co/wNK4Scgw/SEMINAR-7-min.jpg', 'https://i.ibb.co/RGkmRxrn/SEMINAR-11-min.jpg', 'https://i.ibb.co/wr83f27h/SEMINAR-8-min.jpg'] },
    'investiture-ceremony': { title: "Investiture Ceremony", images: ['https://i.ibb.co/v6VF68pL/INVESTITURE-PRIMARY.jpg', 'https://i.ibb.co/sdJkdgcH/INVESTITURE-PRIIMARY-2.jpg', 'https://i.ibb.co/ZphrSgF2/INVESTITURE-PRIMARY-3.jpg', 'https://i.ibb.co/ycZ10Gdp/INVESTITURE-CEROMONY-9.jpg', 'https://i.ibb.co/cSy8YT4W/INVESTITURE-CEROMONY-14.jpg', 'https://i.ibb.co/ynJNK4DS/INVESTITURE-CEROMONY-8.jpg'] },
    'independence-day': { title: "Independence Day", images: ['https://i.ibb.co/nNj4Lk2L/INDEPENDECE-DAY-1.jpg', 'https://i.ibb.co/XZ48kNQG/INDEPENDECE-DAY-2.jpg', 'https://i.ibb.co/TBLn6qWM/INDEPENDECE-DAY-3.jpg', 'https://i.ibb.co/ZzjS4FS9/INDEPENDECE-DAY-4.jpg'] },
    'teachers-day': { title: "Teachers' Day & Onam", images: ['https://i.ibb.co/0ws33Pw/TEACHERS-DAY-1.jpg', 'https://i.ibb.co/CKkPYCbm/TEACHERS-DAY-8.jpg', 'https://i.ibb.co/b5Jw0kq8/TEACHERS-DAY-9.jpg', 'https://i.ibb.co/Q3D4bhDv/TEACHERS-DAY-10.jpg', 'https://i.ibb.co/YFh6ChpY/ONAM-1.jpg', 'https://i.ibb.co/vCG8DvwC/ONAM-2.jpg'] },
    'poetry-competition': { title: "Hindi Poetry Competition", images: ['https://via.placeholder.com/800x600.png?text=Hindi+Poetry+Winners'] },
    'blood-donation': { title: "Blood Donation Camp", images: ['https://via.placeholder.com/800x600.png?text=Blood+Donation+Drive'] },
    'inter-house-competitions': { title: 'Inter House Competitions', images: ['https://placehold.co/800x600/d9534f/ffffff?text=Inter+House+Competitions'] },
    'asisc-competitions': { title: 'ASISC UP and UK Competitions', images: ['https://placehold.co/800x600/5cb85c/ffffff?text=ASISC+Competitions'] },
    'board-meeting': { title: 'Board Meeting', images: ['https://placehold.co/800x600/f0ad4e/ffffff?text=Board+Meeting'] },
    'bsa-meeting': { title: 'BSA Meeting', images: ['https://placehold.co/800x600/5bc0de/ffffff?text=BSA+Meeting'] },
    'summer-camp': { title: 'Summer Camp', images: ['https://placehold.co/800x600/292b2c/ffffff?text=Summer+Camp'] }
  };
  const digitalArtImages = ['https://i.ibb.co/XrFRDnhm/Whats-App-Image-2025-09-25-at-10-42-59-5ddc4c53.jpg', 'https://i.ibb.co/ynTYWYdj/Whats-App-Image-2025-09-25-at-10-42-59-fe32ec7d.jpg', 'https://i.ibb.co/0RTkGqJT/Whats-App-Image-2025-09-25-at-10-43-43-2faace4f.jpg', 'https://i.ibb.co/TDwDvZb8/Whats-App-Image-2025-09-25-at-10-43-44-0f765733.jpg', 'https://i.ibb.co/DHHXKGCD/Whats-App-Image-2025-09-25-at-10-43-44-07f0c119.jpg', 'https://i.ibb.co/xSzbgkmX/Whats-App-Image-2025-09-25-at-10-43-45-3f6cade8.jpg', 'https://i.ibb.co/zHTN5bBc/Whats-App-Image-2025-09-25-at-10-43-55-3986b720.jpg', 'https://i.ibb.co/9m8stw0h/Whats-App-Image-2025-09-25-at-10-43-55-b67ab850.jpg', 'https://i.ibb.co/HD18k4Gb/Whats-App-Image-2025-09-25-at-10-43-56-9e8f944e.jpg', 'https://i.ibb.co/SDjP2q0v/Whats-App-Image-2025-09-25-at-10-43-57-5ef57689.jpg', 'https://i.ibb.co/JwHHY036/Whats-App-Image-2025-09-25-at-10-43-58-f568effa.jpg', 'https://i.ibb.co/35qZH1n2/Whats-App-Image-2025-09-25-at-10-43-59-56aea764.jpg', 'https://i.ibb.co/BXHjQV1/Whats-App-Image-2025-09-25-at-10-44-04-b0788d87.jpg', 'https://i.ibb.co/VWMhPWQ6/Whats-App-Image-2025-09-25-at-10-43-09-c29eee1c.jpg'];


  // --- NEW: Gallery Scrolling Logic ---
  const galleryWrapper = document.querySelector('.gallery-catalogue-wrapper');
  const galleryGrid = document.querySelector('.gallery-catalogue-grid');
  const scrollLeftBtn = document.getElementById('scroll-left-btn');
  const scrollRightBtn = document.getElementById('scroll-right-btn');
  
  if (galleryWrapper && galleryGrid && scrollLeftBtn && scrollRightBtn) {
    const scrollAmount = 320; // Approx width of a card + gap

    const updateArrowVisibility = () => {
      const isScrollable = galleryGrid.scrollWidth > galleryGrid.clientWidth + 1;
      
      if (!isScrollable) {
        scrollLeftBtn.classList.remove('visible');
        scrollRightBtn.classList.remove('visible');
        return;
      }
      scrollLeftBtn.classList.toggle('visible', galleryGrid.scrollLeft > 0);
      scrollRightBtn.classList.toggle('visible', galleryGrid.scrollLeft < galleryGrid.scrollWidth - galleryGrid.clientWidth - 1);
    };
    
    scrollLeftBtn.addEventListener('click', () => { galleryGrid.scrollLeft -= scrollAmount; });
    scrollRightBtn.addEventListener('click', () => { galleryGrid.scrollLeft += scrollAmount; });

    galleryGrid.addEventListener('scroll', updateArrowVisibility);
    window.addEventListener('resize', updateArrowVisibility);
    setTimeout(updateArrowVisibility, 200);
  }
  
  // --- Lightbox Logic ---
  const albumCards = document.querySelectorAll('.album-card');
  const lightbox = document.getElementById('gallery-lightbox');
  const lightboxTitle = document.getElementById('lightbox-title');
  const lightboxImagesContainer = document.getElementById('lightbox-images');
  const lightboxCloseBtn = document.querySelector('.lightbox-close');

  function openLightbox(albumId) {
    const album = galleryData[albumId];
    if (!album) return;
    lightboxTitle.textContent = album.title;
    lightboxImagesContainer.innerHTML = '';
    album.images.forEach((imageUrl, index) => {
      const imgContainer = document.createElement('div');
      imgContainer.className = 'grid-image-container';
      imgContainer.onclick = () => openZoomViewer(album.images, index);
      
      const img = document.createElement('img');
      img.src = imageUrl;
      img.alt = `${album.title} - Image ${index + 1}`;
      img.loading = 'lazy';
      
      imgContainer.appendChild(img);
      lightboxImagesContainer.appendChild(imgContainer);
    });
    lightbox.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    lightbox.style.display = 'none';
    if(zoomOverlay.style.display === 'none' && !articleSlide.classList.contains('visible')) {
        document.body.style.overflow = 'hidden'; 
    }
  }

  if (albumCards.length > 0 && lightbox) {
    albumCards.forEach(card => card.addEventListener('click', () => openLightbox(card.dataset.album)));
    lightboxCloseBtn.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
  }

  // --- NEW: ZOOM VIEWER LOGIC ---
  const zoomOverlay = document.getElementById('image-zoom-overlay');
  const zoomImage = document.getElementById('zoomed-image');
  const zoomInBtn = document.getElementById('zoom-in-btn');
  const zoomOutBtn = document.getElementById('zoom-out-btn');
  const zoomCloseBtn = document.getElementById('zoom-close-btn');
  const zoomPrevBtn = document.getElementById('zoom-prev-btn');
  const zoomNextBtn = document.getElementById('zoom-next-btn');

  let currentZoomAlbum = [];
  let currentZoomIndex = 0;
  let scale = 1;
  let panning = false;
  let pointX = 0, pointY = 0;
  let start = { x: 0, y: 0 };
  let initialPinchDistance = null;

  function setTransform() {
    zoomImage.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`;
    zoomImage.classList.toggle('is-zoomed', scale > 1);
  }

  function resetZoom() {
      scale = 1;
      pointX = 0;
      pointY = 0;
      setTransform();
  }

  function openZoomViewer(album, index) {
      currentZoomAlbum = album;
      currentZoomIndex = index;
      zoomImage.src = currentZoomAlbum[currentZoomIndex];
      resetZoom();
      zoomOverlay.style.display = 'flex';
      document.body.style.overflow = 'hidden';
  }

  function closeZoomViewer() {
      zoomOverlay.style.display = 'none';
      if(lightbox.style.display === 'flex') {
         document.body.style.overflow = 'hidden';
      } else if (!articleSlide.classList.contains('visible')) {
         document.body.style.overflow = 'hidden';
      }
  }

  function showNextImage() {
      currentZoomIndex = (currentZoomIndex + 1) % currentZoomAlbum.length;
      zoomImage.src = currentZoomAlbum[currentZoomIndex];
      resetZoom();
  }

  function showPrevImage() {
      currentZoomIndex = (currentZoomIndex - 1 + currentZoomAlbum.length) % currentZoomAlbum.length;
      zoomImage.src = currentZoomAlbum[currentZoomIndex];
      resetZoom();
  }
  
  if(zoomOverlay){
      zoomInBtn.addEventListener('click', () => { scale += 0.2; setTransform(); });
      zoomOutBtn.addEventListener('click', () => { scale = Math.max(1, scale - 0.2); setTransform(); });
      zoomCloseBtn.addEventListener('click', closeZoomViewer);
      zoomNextBtn.addEventListener('click', showNextImage);
      zoomPrevBtn.addEventListener('click', showPrevImage);

      zoomImage.addEventListener('mousedown', (e) => {
        if (scale <= 1) return;
        e.preventDefault();
        panning = true;
        start = { x: e.clientX - pointX, y: e.clientY - pointY };
        zoomImage.classList.add('is-panning');
      });

      window.addEventListener('mouseup', () => {
        panning = false;
        zoomImage.classList.remove('is-panning');
      });

      window.addEventListener('mousemove', (e) => {
        if (!panning) return;
        pointX = e.clientX - start.x;
        pointY = e.clientY - start.y;
        setTransform();
      });

      // Mobile Touch Events
      function getDistance(p1, p2) {
          let dx = p1.clientX - p2.clientX;
          let dy = p1.clientY - p2.clientY;
          return Math.sqrt(dx * dx + dy * dy);
      }

      zoomImage.addEventListener('touchstart', (e) => {
          if (e.touches.length === 1 && scale > 1) {
              e.preventDefault();
              panning = true;
              start = { x: e.touches[0].clientX - pointX, y: e.touches[0].clientY - pointY };
              zoomImage.classList.add('is-panning');
          } else if (e.touches.length === 2) {
              initialPinchDistance = getDistance(e.touches[0], e.touches[1]);
          }
      });

      zoomImage.addEventListener('touchend', () => {
          panning = false;
          initialPinchDistance = null;
          zoomImage.classList.remove('is-panning');
      });

      zoomImage.addEventListener('touchmove', (e) => {
          if (e.touches.length === 1 && panning) {
              e.preventDefault();
              pointX = e.touches[0].clientX - start.x;
              pointY = e.touches[0].clientY - start.y;
              setTransform();
          } else if (e.touches.length === 2 && initialPinchDistance) {
              e.preventDefault();
              let newDistance = getDistance(e.touches[0], e.touches[1]);
              scale *= newDistance / initialPinchDistance;
              scale = Math.max(1, scale); // Min scale is 1
              initialPinchDistance = newDistance;
              setTransform();
          }
      });
  }
  
  // --- New Logic to handle paintings grid ---
  const paintingsGrid = document.querySelector('#paintings .paintings-grid');
  const paintingsLongGrid = document.querySelector('#paintings .paintings-long-grid');
  if(paintingsGrid && paintingsLongGrid){
      const paintingImages = Array.from(paintingsGrid.querySelectorAll('img')).concat(Array.from(paintingsLongGrid.querySelectorAll('img')));
      const paintingImageUrls = paintingImages.map(img => img.src);
      
      paintingImages.forEach((img, index) => {
          img.addEventListener('click', () => {
              openZoomViewer(paintingImageUrls, index);
          });
      });
  }

    // --- NEW: ARTICLE SLIDE LOGIC ---
    const articleSlide = document.getElementById('article-slide');
    const allClickableCards = document.querySelectorAll('#articles .content-card, #poems .content-card:not(.video-card)');
    const slideTitle = document.getElementById('slide-title');
    const slideAuthor = document.getElementById('slide-author');
    const slideAudioContainer = document.getElementById('slide-audio-player-container');
    const slideTextContent = document.getElementById('slide-text-content');
    const slideCloseBtn = articleSlide.querySelector('.article-slide-close');
    
    let currentSlideAudio = null;

    const openArticleSlide = (card) => {
        // Pause all other audio
        allAudioElements.forEach(audio => audio.pause());

        const title = card.querySelector('h3').textContent;
        const author = card.querySelector('.author-credit').innerHTML;
        const audioPlayerEl = card.querySelector('.audio-player');
        const audioPlayerHTML = audioPlayerEl ? audioPlayerEl.outerHTML : '';
        
        const textContainer = card.querySelector('.animated-text');
        const textId = textContainer ? textContainer.id : null;
        const text = textId ? textContents[textId] : 'Content not available.';

        slideTitle.textContent = title;
        slideAuthor.innerHTML = author;
        slideAudioContainer.innerHTML = audioPlayerHTML;

        // **FIX**: Clear previous content and apply the correct class for styling
        slideTextContent.innerHTML = '';
        slideTextContent.className = 'poem-text'; 

        if (audioPlayerHTML) {
            const newAudioEl = slideAudioContainer.querySelector('audio');
            const slideAudioPlayer = setupAudioPlayer(
                newAudioEl.id,
                slideAudioContainer.querySelector('.play-btn').id,
                slideAudioContainer.querySelector('.progress-bar').id,
                slideAudioContainer.querySelector('.time-display:first-of-type').id,
                slideAudioContainer.querySelector('.time-display:last-of-type').id
            );
            if(slideAudioPlayer) {
                currentSlideAudio = slideAudioPlayer.audio;
                setupAudioText(slideTextContent, currentSlideAudio, text);
            }
        } else {
             currentSlideAudio = null;
             slideTextContent.textContent = text; // Show static text if no audio
        }

        articleSlide.classList.add('visible');
        pageWrapper.style.overflowX = 'hidden';
    };

    const closeArticleSlide = () => {
        if(currentSlideAudio) {
            currentSlideAudio.pause();
            currentSlideAudio = null;
        }
        articleSlide.classList.remove('visible');
        pageWrapper.style.overflowX = 'scroll';
    };

    allClickableCards.forEach(card => {
        card.addEventListener('click', () => openArticleSlide(card));
    });

    slideCloseBtn.addEventListener('click', closeArticleSlide);
    articleSlide.addEventListener('click', (e) => {
        if(e.target === articleSlide) {
            closeArticleSlide();
        }
    });

});
</script>


    <script>
    // Performance optimizations while preserving all original functionality
    (function() {
        'use strict';

        // Lazy loading for images
        function setupLazyLoading() {
            const lazyImages = document.querySelectorAll('img[loading="lazy"]');

            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;

                            // Show loading animation
                            img.classList.add('image-loading');

                            const imageLoader = new Image();
                            imageLoader.onload = function() {
                                img.style.opacity = '1';
                                img.classList.remove('image-loading');
                                img.classList.add('loaded');
                            };

                            imageLoader.onerror = function() {
                                img.style.opacity = '0.5';
                                img.classList.remove('image-loading');
                                console.warn('Failed to load image:', img.src);
                            };

                            imageLoader.src = img.src;
                            observer.unobserve(img);
                        }
                    });
                }, {
                    rootMargin: '50px 0px',
                    threshold: 0.01
                });

                lazyImages.forEach(img => imageObserver.observe(img));
            } else {
                // Fallback for older browsers
                lazyImages.forEach(img => {
                    img.style.opacity = '1';
                    img.classList.add('loaded');
                });
            }
        }

        // Optimize audio loading
        function optimizeAudio() {
            const audioElements = document.querySelectorAll('audio');
            audioElements.forEach(audio => {
                // Preload metadata only, not full audio
                audio.preload = 'metadata';

                // Add loading indicator
                audio.addEventListener('loadstart', function() {
                    this.style.opacity = '0.7';
                });

                audio.addEventListener('canplay', function() {
                    this.style.opacity = '1';
                });

                // Error handling
                audio.addEventListener('error', function() {
                    console.warn('Audio failed to load:', this.src);
                    this.style.opacity = '0.5';
                });
            });
        }

        // Smooth scroll for anchor links
        function setupSmoothScroll() {
            document.addEventListener('click', function(e) {
                if (e.target.tagName === 'A' && e.target.getAttribute('href').startsWith('#')) {
                    e.preventDefault();
                    const targetId = e.target.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        const offsetTop = targetElement.offsetTop - 20; // Small offset
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        }

        // Debounced scroll handler for performance
        function setupScrollOptimization() {
            let ticking = false;

            function updateOnScroll() {
                // Any scroll-based animations can go here
                ticking = false;
            }

            window.addEventListener('scroll', function() {
                if (!ticking) {
                    requestAnimationFrame(updateOnScroll);
                    ticking = true;
                }
            }, { passive: true });
        }

        // Initialize everything when DOM is ready
        function init() {
            setupLazyLoading();
            optimizeAudio();
            setupSmoothScroll();
            setupScrollOptimization();

            // Performance logging
            if ('performance' in window) {
                window.addEventListener('load', function() {
                    setTimeout(function() {
                        const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                        console.log('Page load time:', loadTime + 'ms');
                    }, 0);
                });
            }
        }

        // Start initialization
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    })();
    </script>
    </body>
</html>
